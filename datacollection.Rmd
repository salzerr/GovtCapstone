---
title: "Gov Senior Project"
author: "Rebecca Salzer"
date: "9/20/2022"
output: html_document
---
```{r}
library(tidyverse)
```

```{r gov  DW data input}
datagov2 <- read_csv("HSall_members.csv")
```

```{r DW data manipulation}
datagov2 <-subset(datagov2, select = c(congress, chamber, nominate_dim1, party_code))
datagov2 <- datagov2 %>% filter(datagov2$congress>101) #keep votes from 1992-2022
datagov2$party_code[datagov2$party_code==328]<-"Independent"
datagov2$party_code[datagov2$party_code==100]<-"Democrat"
datagov2$party_code[datagov2$party_code==200]<-"Republican"
senateDW <- datagov2 %>% filter(datagov2$chamber=="Senate") #make senate dataset
houseDW <- datagov2 %>% filter(datagov2$chamber=="House") #make house dataset
senateDW  <-subset(senateDW, select = -c(chamber))
houseDW <-subset(houseDW, select = -c(chamber))
view(senateDW)
view(houseDW)
```

```{r ANES data input 2020}
datagov2020 <- read_csv("anes_timeseries_2020_csv_20220210.csv") #input data
datagov2020[c('ANES', 'DATE')] <- str_split_fixed(datagov2020$version, 'T', 2)
datagov2020[c('anes', 'year')] <- str_split_fixed(datagov2020$ANES, 'S', 2)
head(datagov2020)
```

```{r ANES manipulation 2020}
vars <- c("V201336", "V201258", "V201246", "V201255", "V201262", "V201252", "V201249" , "V201156", "V201157", "V201200", "V201201", "V201005", "V201228", "V201229", "V201230", "V201507x", "V201511x", "V201546", "V201549x", "V201600", "year", "V200010a")
datagovnew2020 <- datagov2020[vars]
datagovnew2020 <- datagovnew2020 %>% rename("Abortion4pt" = "V201336" ,
                                         "Blacks7pt" = "V201258",
                                         "Spending7pt" = "V201246",
                                         "Jobs7pt" = "V201255",
                                        "Environment7pt"= "V201262",
                                         "Healthcare7pt"="V201252",
                                         "Defense7pt"="V201249",
                                        "Demthermom" = "V201156",
                                        "Repthermom" = "V201157",
                                         "ConservLib7pt" = "V201200",
                                         "ConservLib2" = "V201201",
                                        "Attention" = "V201005",
                                       "PartyID" =  "V201228",
                                        "StrongID" = "V201229",
                                         "LeanID" = "V201230",
                                         "Age" = "V201507x",
                                         "Education" = "V201511x",
                                         "Hispanic" = "V201546",
                                         "Race" = "V201549x",
                                        "Gender" = "V201600",
                                       "Weight" = "V200010a")
datagovnew2020$Blacks7pt[datagovnew2020$Blacks7pt==99]<-NA #99 is nonresponse
datagovnew2020$Spending7pt[datagovnew2020$Spending7pt==99]<-NA
datagovnew2020$Jobs7pt[datagovnew2020$Jobs7pt==99]<-NA
datagovnew2020$Environment7pt[datagovnew2020$Environment7pt==99]<-NA
datagovnew2020$Defense7pt[datagovnew2020$Defense7pt==99]<-NA
datagovnew2020$Healthcare7pt[datagovnew2020$Healthcare7pt==99]<-NA
datagovnew2020$ConservLib7pt[datagovnew2020$ConservLib7pt==99]<-NA
datagovnew2020$Abortion4pt[datagovnew2020$Abortion4pt==5]<-NA #other
datagovnew2020$Race[datagovnew2020$Race>2]<-NA #dont have these options across all surveys
datagovnew2020$Education[datagovnew2020$Education==-2]<-NA #missing
datagovnew2020[datagovnew2020==-9]<-NA #refused 
datagovnew2020[datagovnew2020==-8]<-NA #DK
datagovnew2020[datagovnew2020==-1]<-NA #inappliable
datagovnew2020[datagovnew2020==-4]<-NA #error
datagovnew2020[datagovnew2020==998]<-NA #DK
#make attention scale consistent
datagovnew2020$Attention[datagovnew2020$Attention<3]<-1 
datagovnew2020$Attention[datagovnew2020$Attention==3]<-3
datagovnew2020$Attention[datagovnew2020$Attention>3]<-5
datagovnew2020$year <-as.numeric(datagovnew2020$year)
head(datagovnew2020)
```
```{r ANES data input 2016}
library(haven)
datagov2016 <- read_sav("anes_timeseries_2016.sav")
datagov2016[c('ANES', 'DATE')] <- str_split_fixed(datagov2016$version, 'T', 2)
datagov2016[c('anes', 'year')] <- str_split_fixed(datagov2016$ANES, 'S', 2)
head(datagov2016)
```

```{r ANES manipulation 2016}
library(stringr)
vars <- c("V161232", "V161198", "V161178", "V161189", "V161201", "V161184", "V161181" , "V161095", "V161096", "V161126", "V161127", "V161003", "V161155", "V161156", "V161157", "V161267", "V161270", "V161309", "V161310x", "V161342",  "year", "V160101")
datagovnew2016<- datagov2016[vars]
datagovnew2016 <- datagovnew2016 %>% rename("Abortion4pt" = "V161232" ,
                                         "Blacks7pt" = "V161198",
                                         "Spending7pt" = "V161178",
                                         "Jobs7pt" = "V161189",
                                        "Environment7pt"= "V161201",
                                         "Healthcare7pt"="V161184",
                                         "Defense7pt"="V161181",
                                        "Demthermom" = "V161095",
                                        "Repthermom" = "V161096",
                                         "ConservLib7pt" = "V161126",
                                         "ConservLib2" = "V161127",
                                        "Attention" = "V161003",
                                       "PartyID" =  "V161155",
                                        "StrongID" = "V161156",
                                         "LeanID" = "V161157",
                                         "Age" = "V161267",
                                         "Education" = "V161270",
                                         "Hispanic" = "V161309",
                                         "Race" = "V161310x",
                                        "Gender" = "V161342",
                                       "Weight" = "V160101")
datagovnew2016$Blacks7pt[datagovnew2016$Blacks7pt==99]<-NA #99 is nonresponse
datagovnew2016$Spending7pt[datagovnew2016$Spending7pt==99]<-NA
datagovnew2016$Jobs7pt[datagovnew2016$Jobs7pt==99]<-NA
datagovnew2016$Environment7pt[datagovnew2016$Environment7pt==99]<-NA
datagovnew2016$Defense7pt[datagovnew2016$Defense7pt==99]<-NA
datagovnew2016$Healthcare7pt[datagovnew2016$Healthcare7pt==99]<-NA
datagovnew2016$ConservLib7pt[datagovnew2016$ConservLib7pt==99]<-NA
datagovnew2016$Abortion4pt[datagovnew2016$Abortion4pt==5]<-NA #other category
datagovnew2016$Education[datagovnew2016$Education==95]<-NA #other category
datagovnew2016$Race[datagovnew2016$Race==-2]<-NA #missing
datagovnew2016$Race[datagovnew2016$Race>2]<-NA #dont have these options across all surveys
datagovnew2016[datagovnew2016==-9]<-NA #refused 
datagovnew2016[datagovnew2016==-8]<-NA #DK
datagovnew2016[datagovnew2016==-1]<-NA #inappliable
datagovnew2016[datagovnew2016==-99]<-NA #refused
datagovnew2016[datagovnew2016==-89]<-NA #dk
datagovnew2016[datagovnew2016==-88]<-NA #cant say
#make attention scale consistent
datagovnew2016$Attention[datagovnew2016$Attention<3]<-1 
datagovnew2016$Attention[datagovnew2016$Attention==3]<-3
datagovnew2016$Attention[datagovnew2016$Attention>3]<-5
#make education a 5 point scale
datagovnew2016$Education[datagovnew2016$Education<9]<-1
datagovnew2016$Education[datagovnew2016$Education==9]<-2
datagovnew2016$Education[datagovnew2016$Education==10]<-3
datagovnew2016$Education[datagovnew2016$Education==11]<-3
datagovnew2016$Education[datagovnew2016$Education==12]<-3
datagovnew2016$Education[datagovnew2016$Education==13]<-4
datagovnew2016$Education[datagovnew2016$Education==14]<-5
datagovnew2016$Education[datagovnew2016$Education==15]<-5
datagovnew2016$Education[datagovnew2016$Education==16]<-5
datagovnew2016$Education[datagovnew2016$Education>16]<-NA
datagovnew2016$year <-as.numeric(datagovnew2016$year)
head(datagovnew2016)
```

```{r ANES data input 2012}
library(haven)
datagov2012 <- read_sav("anes_timeseries_2012.sav")
datagov2012[c('ANES', 'DATE')] <- str_split_fixed(datagov2012$version, 'T', 2)
datagov2012[c('anes', 'year')] <- str_split_fixed(datagov2012$ANES, 'S', 2)
head(datagov2012)
```

```{r ANES manipulation 2012}
library(stringr)
vars <- c("abortpre_4point", "aidblack_self", "spsrvpr_ssself", "guarpr_self", "envjob_self", "inspre_self", "defsppr_self" , "ft_dem", "ft_rep", "libcpre_self", "libcpre_choose", "interest_attention", "pid_self", "pid_strong", "pid_lean", "dem_age_r_x", "dem_edugroup_x", "dem_hisp", "dem_racecps_1st", "gender_respondent_x", "weight_full", "year")
datagovnew2012<- datagov2012[vars]
datagovnew2012 <- datagovnew2012 %>% rename("Abortion4pt" = "abortpre_4point" ,
                                         "Blacks7pt" = "aidblack_self",
                                         "Spending7pt" = "spsrvpr_ssself",
                                         "Jobs7pt" = "guarpr_self",
                                        "Environment7pt"= "envjob_self",
                                         "Healthcare7pt"="inspre_self",
                                         "Defense7pt"="defsppr_self",
                                        "Demthermom" = "ft_dem",
                                        "Repthermom" = "ft_rep",
                                         "ConservLib7pt" = "libcpre_self",
                                         "ConservLib2" = "libcpre_choose",
                                        "Attention" = "interest_attention",
                                       "PartyID" =  "pid_self",
                                        "StrongID" = "pid_strong",
                                         "LeanID" = "pid_lean",
                                         "Age" = "dem_age_r_x",
                                         "Education" = "dem_edugroup_x",
                                         "Hispanic" = "dem_hisp",
                                         "Race" = "dem_racecps_1st",
                                        "Gender" = "gender_respondent_x",
                                         "Weight" = "weight_full")
datagovnew2012$Blacks7pt[datagovnew2012$Blacks7pt==99]<-NA #99 is nonresponse
datagovnew2012$Spending7pt[datagovnew2012$Spending7pt==99]<-NA
datagovnew2012$Jobs7pt[datagovnew2012$Jobs7pt==99]<-NA
datagovnew2012$Environment7pt[datagovnew2012$Environment7pt==99]<-NA
datagovnew2012$Defense7pt[datagovnew2012$Defense7pt==99]<-NA
datagovnew2012$Healthcare7pt[datagovnew2012$Healthcare7pt==99]<-NA
datagovnew2012$ConservLib7pt[datagovnew2012$ConservLib7pt==99]<-NA
datagovnew2012$Abortion4pt[datagovnew2012$Abortion4pt==5]<-NA #other category
datagovnew2012$Education[datagovnew2012$Education==95]<-NA #other category
datagovnew2012$Race[datagovnew2012$Race>2]<-NA #dont have these options across all surveys
datagovnew2012[datagovnew2012==-9]<-NA #refused 
datagovnew2012[datagovnew2012==-8]<-NA #DK
datagovnew2012[datagovnew2012==-1]<-NA #inappliable
datagovnew2012[datagovnew2012==-2]<-NA #also DK/haven't thought much about
datagovnew2012[datagovnew2012==-4]<-NA #error
#make attention scale consistent
datagovnew2012$Attention[datagovnew2012$Attention<3]<-1 
datagovnew2012$Attention[datagovnew2012$Attention==3]<-3
datagovnew2012$Attention[datagovnew2012$Attention>3]<-5
datagovnew2012$year <-as.numeric(datagovnew2012$year)
head(datagovnew2012)
```
```{r ANES data input 2008}
library(haven)
datagov2008 <- read_sav("anes_timeseries_2008.sav")
datagov2008[c('ANES', 'DATE')] <- str_split_fixed(datagov2008$Version, 'T', 2)
datagov2008[c('anes', 'year')] <- str_split_fixed(datagov2008$ANES, 'S', 2)
head(datagov2008)
```

```{r ANES manipulation 2008}
library(stringr)
vars <- c("V085086", "V083137", "V083105", "V083128", "V083154", "V083119", "V083112" , "V083044a", "V083044b", "V083069", "V083069a", "V083001b", "V083097", "V083098a", "V083098b", "V081104", "V083218x", "V081103", "V081102", "V081101", "V080102", "year")
datagovnew2008<- datagov2008[vars]
datagovnew2008 <- datagovnew2008 %>% rename("Abortion4pt" = "V085086" , #on post election survey
                                         "Blacks7pt" = "V083137",
                                         "Spending7pt" = "V083105",
                                         "Jobs7pt" = "V083128",
                                        "Environment7pt"= "V083154",
                                         "Healthcare7pt"="V083119",
                                         "Defense7pt"="V083112",
                                        "Demthermom" = "V083044a",
                                        "Repthermom" = "V083044b",
                                         "ConservLib7pt" = "V083069",
                                         "ConservLib2" = "V083069a", 
                                        "Attention" = "V083001b", #this is the point where the new version is first asked
                                       "PartyID" =  "V083097",
                                        "StrongID" = "V083098a",
                                         "LeanID" = "V083098b",
                                         "Age" = "V081104",
                                         "Education" = "V083218x",
                                         "Hispanic" = "V081103",
                                         "Race" = "V081102",
                                        "Gender" = "V081101",
                                         "Weight" = "V080102") #this is the point where the new version is first asked
                                                              #post election question
datagovnew2008$Blacks7pt[datagovnew2008$Blacks7pt==99]<-NA #99 is nonresponse
datagovnew2008$Spending7pt[datagovnew2008$Spending7pt==99]<-NA
datagovnew2008$Jobs7pt[datagovnew2008$Jobs7pt==99]<-NA
datagovnew2008$Environment7pt[datagovnew2008$Environment7pt==99]<-NA
datagovnew2008$Defense7pt[datagovnew2008$Defense7pt==99]<-NA
datagovnew2008$Healthcare7pt[datagovnew2008$Healthcare7pt==99]<-NA
datagovnew2008$ConservLib7pt[datagovnew2008$ConservLib7pt==99]<-NA
datagovnew2008$Abortion4pt[datagovnew2008$Abortion4pt==7]<-NA #other category
datagovnew2008$Education[datagovnew2008$Education==0]<-NA #dk/ref
datagovnew2008$Race[datagovnew2008$Race>2]<-NA #races not included in later scales
datagovnew2008$ConservLib2[datagovnew2008$ConservLib2==3]<-2 #conservative category
datagovnew2008$ConservLib2[datagovnew2008$ConservLib2==5]<-3 #moderate category
datagovnew2008[datagovnew2008==-6]<-NA #DK 
datagovnew2008[datagovnew2008==-9]<-NA #refused 
datagovnew2008[datagovnew2008==-8]<-NA #DK
datagovnew2008[datagovnew2008==-1]<-NA #inappliable
datagovnew2008[datagovnew2008==-2]<-NA #not asked
datagovnew2008[datagovnew2008==-7]<-NA #also DK/haven't thought much about
datagovnew2008[datagovnew2008==-4]<-NA #not avalible
#make attention scale consistent
datagovnew2008$Attention[datagovnew2008$Attention<3]<-1 
datagovnew2008$Attention[datagovnew2008$Attention==3]<-3
datagovnew2008$Attention[datagovnew2008$Attention>3]<-5
#make education a 5 point scale
datagovnew2008$Education[datagovnew2008$Education<=2]<-1
datagovnew2008$Education[datagovnew2008$Education==3]<-2
datagovnew2008$Education[datagovnew2008$Education==4]<-3
datagovnew2008$Education[datagovnew2008$Education==5]<-3
datagovnew2008$Education[datagovnew2008$Education==6]<-4
datagovnew2008$Education[datagovnew2008$Education==7]<-5
datagovnew2008$year <-as.numeric(datagovnew2008$year)
head(datagovnew2008)
```
```{r ANES data input 2004}
library(haven)
datagov2004 <- read_dta("anes2004TS.dta")
datagov2004[c('year', 'ANES')] <- str_split_fixed(datagov2004$Version, 'N', 2)
```

```{r ANES manipulation 2004}
library(stringr)
vars <- c("V045132", "V043158", "V043136", "V043152", "V043182", "V043150", "V043142" , "V043049", "V043050", "V043085", "V043085a", "V043114", "V043001", "V043114a", "V043115", "V043250", "V043254", "V043299", "V043411", "V040102", "V043304x", "year")
datagovnew2004<- datagov2004[vars]
datagovnew2004 <- datagovnew2004 %>% rename("Abortion4pt" = "V045132" , #on post election survey
                                         "Blacks7pt" = "V043158",
                                         "Spending7pt" = "V043136",
                                         "Jobs7pt" = "V043152",
                                        "Environment7pt"= "V043182",
                                         "Healthcare7pt"="V043150",
                                         "Defense7pt"="V043142",
                                        "Demthermom" = "V043049",
                                        "Repthermom" = "V043050",
                                         "ConservLib7pt" = "V043085",
                                         "ConservLib2" = "V043085a", 
                                        "Attention" = "V043001", 
                                       "PartyID" =  "V043114",
                                        "StrongID" = "V043114a",
                                         "LeanID" = "V043115",
                                         "Age" = "V043250",
                                         "Education" = "V043254",
                                         "Hispanic" = "V043304x",
                                         "Race" = "V043299",
                                        "Gender" = "V043411",
                                         "Weight" = "V040102")  
datagovnew2004$Blacks7pt[datagovnew2004$Blacks7pt>79]<-NA #>79 is dk, refused and havent thought about
datagovnew2004$Spending7pt[datagovnew2004$Spending7pt>79]<-NA
datagovnew2004$Jobs7pt[datagovnew2004$Jobs7pt>79]<-NA
datagovnew2004$Environment7pt[datagovnew2004$Environment7pt>79]<-NA
datagovnew2004$Defense7pt[datagovnew2004$Defense7pt>79]<-NA
datagovnew2004$Healthcare7pt[datagovnew2004$Healthcare7pt>79]<-NA
datagovnew2004$ConservLib7pt[datagovnew2004$ConservLib7pt>=79]<-NA
datagovnew2004$Abortion4pt[datagovnew2004$Abortion4pt>6]<-NA #other category, DK and refused
datagovnew2004$Race[datagovnew2004$Race==10]<-2 #black category
datagovnew2004$Race[datagovnew2004$Race==50]<-1 #white category
datagovnew2004$Race[datagovnew2004$Race>2]<-2 #other categorys arent across all surveys
datagovnew2004$PartyID[datagovnew2004$PartyID>7]<-NA #DK/ref
datagovnew2004$StrongID[datagovnew2004$StrongID>7]<-NA #DK/ref
datagovnew2004$LeanID[datagovnew2004$LeanID>7]<-NA #DK/ref
datagovnew2004$ConservLib2[datagovnew2004$ConservLib2==3]<-2 #conservative category
datagovnew2004$ConservLib2[datagovnew2004$ConservLib2==5]<-3 #moderate category
datagovnew2004$ConservLib2[datagovnew2004$ConservLib2==8]<-NA #nonresponse
datagovnew2004$Hispanic[datagovnew2004$Hispanic==0]<-2 #nonhispanic
datagovnew2004$Hispanic[datagovnew2004$Hispanic==2]<-1 #hispanic
datagovnew2004$Hispanic[datagovnew2004$Hispanic==3]<-1 #hispanic
datagovnew2004$ConservLib7pt[datagovnew2004$ConservLib7pt==8]<-NA #DK
datagovnew2004[datagovnew2004>776]<-NA #dont recognize, dont know where to rate, refused
#make education a 5 point scale
datagovnew2004$Education[datagovnew2004$Education==1]<-1
datagovnew2004$Education[datagovnew2004$Education==2]<-1
datagovnew2004$Education[datagovnew2004$Education==3]<-2
datagovnew2004$Education[datagovnew2004$Education==4]<-3
datagovnew2004$Education[datagovnew2004$Education==5]<-3
datagovnew2004$Education[datagovnew2004$Education==6]<-4
datagovnew2004$Education[datagovnew2004$Education==7]<-5
datagovnew2004$year <-as.numeric(datagovnew2004$year)
head(datagovnew2004)
```
```{r ANES data input 2000}
library(haven)
datagov2000 <- read_dta("anes2000TS.dta")
datagov2000[c('ANES', 'year')] <- str_split_fixed(datagov2000$VERSION, '_', 2)
datagov2000[c('year', 'version')] <- str_split_fixed(datagov2000$year, 'p', 2)
head(datagov2000)
```

```{r ANES manipulation 2000}
library(stringr)
vars <- c("V000694", "V000641", "V000545", "V000615", "V000771", "V000609", "V000581" , "V000369", "V000370", "V000439", "V000441", "V000301", "V000519", "V000908", "V000522", "V001029", "V001006a", "V001012", "V000002a", "V000521", "V000520", "V000913", "year")
datagovnew2000<- datagov2000[vars]
datagovnew2000 <- datagovnew2000 %>% rename("Abortion4pt" = "V000694" , #on post election survey
                                         "Blacks7pt" = "V000641",
                                         "Spending7pt" = "V000545",
                                         "Jobs7pt" = "V000615",
                                        "Environment7pt"= "V000771",
                                         "Healthcare7pt"="V000609",
                                         "Defense7pt"="V000581",
                                        "Demthermom" = "V000369",
                                        "Repthermom" = "V000370",
                                         "ConservLib7pt" = "V000439",
                                         "ConservLib2" = "V000441", 
                                        "Attention" = "V000301", 
                                       "PartyID" =  "V000519",
                                        "StrongIDdem" = "V000520", 
                                       "StrongIDrep" = "V000521",
                                         "LeanID" = "V000522",
                                         "Age" = "V000908",
                                         "Education" = "V000913", 
                                         "Hispanic" = "V001012",
                                         "Race" = "V001006a",
                                        "Gender" = "V001029",
                                         "Weight" = "V000002a")  
datagovnew2000 <- datagovnew2000 %>% mutate(StrongID = case_when(StrongIDdem < 1 ~ 1,
                                                                StrongIDdem < 5 ~ 5,
                                                                StrongIDrep < 1 ~ 1,
                                                                StrongIDrep < 5 ~ 5))
datagovnew2000 <-subset(datagovnew2000, select = -c(StrongIDdem, StrongIDrep))
datagovnew2000$Blacks7pt[datagovnew2000$Blacks7pt>7]<-NA #8 and 9 is dk, refused 
datagovnew2000$Spending7pt[datagovnew2000$Spending7pt>7]<-NA
datagovnew2000$Jobs7pt[datagovnew2000$Jobs7pt>7]<-NA
datagovnew2000$Environment7pt[datagovnew2000$Environment7pt>7]<-NA
datagovnew2000$Defense7pt[datagovnew2000$Defense7pt>7]<-NA
datagovnew2000$Healthcare7pt[datagovnew2000$Healthcare7pt>7]<-NA
datagovnew2000$ConservLib7pt[datagovnew2000$ConservLib7pt>7]<-NA
datagovnew2000$ConservLib2[datagovnew2000$ConservLib2>6]<-NA
datagovnew2000$Abortion4pt[datagovnew2000$Abortion4pt>6]<-NA  #7 is other
datagovnew2000$LeanID[datagovnew2000$LeanID>7]<-NA 
datagovnew2000$Hispanic[datagovnew2000$Hispanic>7]<-NA 
datagovnew2000$PartyID[datagovnew2000$PartyID>7]<-NA 
datagovnew2000$Race[datagovnew2000$Race==10]<-2 #black category
datagovnew2000$Race[datagovnew2000$Race==50]<-1 #white category
datagovnew2000$Race[datagovnew2000$Race>2]<-2 #other categorys arent across all surveys
datagovnew2000$Hispanic[datagovnew2000$Hispanic==5]<-2 #no category
datagovnew2000$ConservLib2[datagovnew2000$ConservLib2==3]<-2 #conservative category
datagovnew2000$ConservLib2[datagovnew2000$ConservLib2==5]<-3 #moderate category
datagovnew2000[datagovnew2000>900]<-NA #DK, NA, refused
datagovnew2000[datagovnew2000==0]<-NA #NA
datagovnew2000$Weight[is.na(datagovnew2000$Weight)]<-0
#make education a 5 point scale
datagovnew2000$Education[datagovnew2000$Education==1]<-1
datagovnew2000$Education[datagovnew2000$Education==2]<-1
datagovnew2000$Education[datagovnew2000$Education==3]<-2
datagovnew2000$Education[datagovnew2000$Education==4]<-3
datagovnew2000$Education[datagovnew2000$Education==5]<-3
datagovnew2000$Education[datagovnew2000$Education==6]<-4
datagovnew2000$Education[datagovnew2000$Education==7]<-5
datagovnew2000$Education[datagovnew2000$Education>7]<-NA #Dk/Nonresponse
datagovnew2000$year <-as.numeric(datagovnew2000$year)
head(datagovnew2000)
```

```{r ANES data input 1996}
library(haven)
datagov1996 <- read_dta("nes96.dta")
datagov1996[c('anes', 'year')] <- str_split_fixed(datagov1996$DSETID, ':', 2)
datagov1996[c('year', 'TX')] <- str_split_fixed(datagov1996$year, '.T', 2)
head(datagov1996)
```

```{r ANES manipulation 1996}
library(stringr)
vars <- c("V960503", "V960487", "V960450", "V960483", "V960537", "V960479", "V960463" , "V960292", "V960293", "V960365", "V960366", "V960201", "V960417", "V960605", "V960419", "V960610", "V960708", "V960067", "V960066", "V960003", "V960418", "year")
datagovnew1996<- datagov1996[vars]
datagovnew1996 <- datagovnew1996 %>% rename("Abortion4pt" = "V960503" ,
                                         "Blacks7pt" = "V960487",
                                         "Spending7pt" = "V960450",
                                         "Jobs7pt" = "V960483",
                                        "Environment7pt"= "V960537",
                                         "Healthcare7pt"="V960479",
                                         "Defense7pt"="V960463",
                                        "Demthermom" = "V960292",
                                        "Repthermom" = "V960293",
                                         "ConservLib7pt" = "V960365",
                                         "ConservLib2" = "V960366", 
                                        "Attention" = "V960201", 
                                       "PartyID" =  "V960417",
                                        "StrongID" = "V960418", 
                                         "LeanID" = "V960419",
                                         "Age" = "V960605",
                                         "Education" = "V960610", 
                                         "Hispanic" = "V960708",
                                         "Race" = "V960067",
                                        "Gender" = "V960066",
                                         "Weight" = "V960003")  
datagovnew1996$Blacks7pt[datagovnew1996$Blacks7pt>7]<-NA #8 and 9 is dk, refused 
datagovnew1996$Spending7pt[datagovnew1996$Spending7pt>7]<-NA
datagovnew1996$Jobs7pt[datagovnew1996$Jobs7pt>7]<-NA
datagovnew1996$Environment7pt[datagovnew1996$Environment7pt>7]<-NA
datagovnew1996$Defense7pt[datagovnew1996$Defense7pt>7]<-NA
datagovnew1996$Healthcare7pt[datagovnew1996$Healthcare7pt>7]<-NA
datagovnew1996$ConservLib7pt[datagovnew1996$ConservLib7pt>7]<-NA
datagovnew1996$ConservLib2[datagovnew1996$ConservLib2>6]<-NA
datagovnew1996$Abortion4pt[datagovnew1996$Abortion4pt>6]<-NA  #7 is other
datagovnew1996$LeanID[datagovnew1996$LeanID>7]<-NA 
datagovnew1996$StrongID[datagovnew1996$StrongID>7]<-NA 
datagovnew1996$Age[datagovnew1996$Age>97]<-NA #refused and NA
datagovnew1996$Hispanic[datagovnew1996$Hispanic>7]<-NA 
datagovnew1996$PartyID[datagovnew1996$PartyID>7]<-NA 
datagovnew1996$Race[datagovnew1996$Race>2]<-2 #other categorys arent across all surveys
datagovnew1996$Hispanic[datagovnew1996$Hispanic==5]<-2 #no category
datagovnew1996[datagovnew1996>900]<-NA #DK, NA, refused
datagovnew1996[datagovnew1996==0]<-NA #NA
#make attention scale the same
datagovnew1996$Attention[datagovnew1996$Attention==3]<-5
datagovnew1996$Attention[datagovnew1996$Attention==2]<-3
#make education a 5 point scale
datagovnew1996$Education[datagovnew1996$Education==1]<-1
datagovnew1996$Education[datagovnew1996$Education==2]<-1
datagovnew1996$Education[datagovnew1996$Education==3]<-2
datagovnew1996$Education[datagovnew1996$Education==4]<-3
datagovnew1996$Education[datagovnew1996$Education==5]<-3
datagovnew1996$Education[datagovnew1996$Education==6]<-4
datagovnew1996$Education[datagovnew1996$Education==7]<-5
datagovnew1996$Education[datagovnew1996$Education>7]<-NA #Dk/Nonresponse
datagovnew1996$year <-as.numeric(datagovnew1996$year)
view(datagovnew1996)
```

```{r ANES data input 1992}
library(haven)
datagov1992 <- read_dta("NES1992.dta")
datagov1992[c('year', 'n')] <- str_split_fixed(datagov1992$VDSETNO, '.T', 2)
head(datagov1992)
```

```{r ANES manipulation 1992}
library(stringr)
vars <- c("V923732", "V923724", "V923701", "V923718", "V923716", "V923707" , "V923317", "V923318", "V923509", "V923512", "V923101", "V923631", "V923632", "V923633", "V923008", "V923903", "V923908", "V924122", "V924202", "V924201", "year")
datagovnew1992<- datagov1992[vars]
datagovnew1992 <- datagovnew1992 %>% rename("Abortion4pt" = "V923732" ,
                                         "Blacks7pt" = "V923724",
                                         "Spending7pt" = "V923701",
                                         "Jobs7pt" = "V923718",
                                         "Healthcare7pt"="V923716",
                                         "Defense7pt"="V923707",
                                        "Demthermom" = "V923317",
                                        "Repthermom" = "V923318",
                                         "ConservLib7pt" = "V923509",
                                         "ConservLib2" = "V923512", 
                                        "Attention" = "V923101", 
                                       "PartyID" =  "V923631",
                                        "StrongID" = "V923632", 
                                         "LeanID" = "V923633",
                                         "Age" = "V923903",
                                         "Education" = "V923908", 
                                         "Hispanic" = "V924122",
                                         "Race" = "V924202",
                                        "Gender" = "V924201",
                                         "Weight" = "V923008")  
datagovnew1992$Blacks7pt[datagovnew1992$Blacks7pt>7]<-NA #8 and 9 is dk, refused 
datagovnew1992$Spending7pt[datagovnew1992$Spending7pt>7]<-NA
datagovnew1992$Jobs7pt[datagovnew1992$Jobs7pt>7]<-NA
datagovnew1992$Defense7pt[datagovnew1992$Defense7pt>7]<-NA
datagovnew1992$Healthcare7pt[datagovnew1992$Healthcare7pt>7]<-NA
datagovnew1992$ConservLib7pt[datagovnew1992$ConservLib7pt>7]<-NA
datagovnew1992$ConservLib2[datagovnew1992$ConservLib2>6]<-NA
datagovnew1992$Abortion4pt[datagovnew1992$Abortion4pt>5]<-NA  #7 is other 6 is voluntary response not given for later surveys
datagovnew1992$LeanID[datagovnew1992$LeanID>7]<-NA 
datagovnew1992$StrongID[datagovnew1992$StrongID>7]<-NA 
datagovnew1992$Hispanic[datagovnew1992$Hispanic>7]<-NA 
datagovnew1992$PartyID[datagovnew1992$PartyID>7]<-NA 
datagovnew1992$Race[datagovnew1992$Race>2]<-2 #other categorys arent across all surveys
datagovnew1992$Hispanic[datagovnew1992$Hispanic==5]<-2 #no category
datagovnew1992$Hispanic[datagovnew1992$Hispanic==0]<-1
datagovnew1992$ConservLib2[datagovnew1992$ConservLib2==3]<-2 #conservative category
datagovnew1992$ConservLib2[datagovnew1992$ConservLib2==5]<-3 #moderate category
datagovnew1992$Attention[datagovnew1992$Attention>7]<-NA #DK/NA
datagovnew1992[datagovnew1992>900]<-NA #DK, NA, refused
datagovnew1992[datagovnew1992==0]<-NA #NA
#make education a 5 point scale
datagovnew1992$Education[datagovnew1992$Education==1]<-1
datagovnew1992$Education[datagovnew1992$Education==2]<-1
datagovnew1992$Education[datagovnew1992$Education==3]<-2
datagovnew1992$Education[datagovnew1992$Education==4]<-3
datagovnew1992$Education[datagovnew1992$Education==5]<-3
datagovnew1992$Education[datagovnew1992$Education==6]<-4
datagovnew1992$Education[datagovnew1992$Education==7]<-5
datagovnew1992$Education[datagovnew1992$Education>7]<-NA #Dk/Nonresponse
datagovnew1992$year <-as.numeric(datagovnew1992$year)
head(datagovnew1992)
```

```{r merge ANES}
finalANESdata<-rbind(datagovnew2020, datagovnew2016, datagovnew2012, datagovnew2008, datagovnew2004, datagovnew2000, datagovnew1996)
vars <- c("Environment7pt", "year", "Age", "Race", "Education", "Weight", "Attention", "PartyID", "StrongID", "LeanID", "Hispanic", "Gender")
finalANESdataenvironment <- finalANESdata[vars]
finalANESdata <-subset(finalANESdata, select = -c(Environment7pt))
finalANESdata<-rbind(finalANESdata, datagovnew1992)
head(finalANESdataenvironment)
head(finalANESdata)
```

```{r webscraping NARAL}
library(rvest)
library(tidyverse)
library(dplyr)
url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/13068")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2020pt1 <-data.frame(party, office, rating)
ProChoice2020pt1 <- ProChoice2020pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/13068?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2020pt2 <-data.frame(party, office, rating)
ProChoice2020pt2 <- ProChoice2020pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/13068?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2020pt3 <-data.frame(party, office, rating)
ProChoice2020pt3 <- ProChoice2020pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/13068?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2020pt4 <-data.frame(party, office, rating)
ProChoice2020pt4 <- ProChoice2020pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/13068?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2020pt5 <-data.frame(party, office, rating)
ProChoice2020pt5 <- ProChoice2020pt5[1:100,]

NARAL2020<-rbind(ProChoice2020pt1, ProChoice2020pt2, ProChoice2020pt3, ProChoice2020pt4, ProChoice2020pt5)
NARAL2020$year<-rep(c("2020"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/11751")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2019pt1 <-data.frame(party, office, rating)
ProChoice2019pt1 <- ProChoice2019pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/11751?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2019pt2 <-data.frame(party, office, rating)
ProChoice2019pt2 <- ProChoice2019pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/11751?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2019pt3 <-data.frame(party, office, rating)
ProChoice2019pt3 <- ProChoice2019pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/11751?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2019pt4 <-data.frame(party, office, rating)
ProChoice2019pt4 <- ProChoice2019pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/11751?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2019pt5 <-data.frame(party, office, rating)
ProChoice2019pt5 <- ProChoice2019pt5[1:100,]

NARAL2019<-rbind(ProChoice2019pt1, ProChoice2019pt2, ProChoice2019pt3, ProChoice2019pt4, ProChoice2019pt5)
NARAL2019$year<-rep(c("2019"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/10511")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2017pt1 <-data.frame(party, office, rating)
ProChoice2017pt1 <- ProChoice2017pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/10511?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2017pt2 <-data.frame(party, office, rating)
ProChoice2017pt2 <- ProChoice2017pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/10511?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2017pt3 <-data.frame(party, office, rating)
ProChoice2017pt3 <- ProChoice2017pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/10511?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2017pt4 <-data.frame(party, office, rating)
ProChoice2017pt4 <- ProChoice2017pt4[1:100,]

NARAL2017<-rbind(ProChoice2017pt1, ProChoice2017pt2, ProChoice2017pt3, ProChoice2017pt4)
NARAL2017$year<-rep(c("2017"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/9755")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2016pt1 <-data.frame(party, office, rating)
ProChoice2016pt1 <- ProChoice2016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/9755?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2016pt2 <-data.frame(party, office, rating)
ProChoice2016pt2 <- ProChoice2016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/9755?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2016pt3 <-data.frame(party, office, rating)
ProChoice2016pt3 <- ProChoice2016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/9755?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2016pt4 <-data.frame(party, office, rating)
ProChoice2016pt4 <- ProChoice2016pt4[1:100,]

NARAL2016<-rbind(ProChoice2016pt1, ProChoice2016pt2, ProChoice2016pt3, ProChoice2016pt4)
NARAL2016$year<-rep(c("2016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/8880")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2015pt1 <-data.frame(party, office, rating)
ProChoice2015pt1 <- ProChoice2015pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/8880?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2015pt2 <-data.frame(party, office, rating)
ProChoice2015pt2 <- ProChoice2015pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/8880?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2015pt3 <-data.frame(party, office, rating)
ProChoice2015pt3 <- ProChoice2015pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/8880?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2015pt4 <-data.frame(party, office, rating)
ProChoice2015pt4 <- ProChoice2015pt4[1:100,]


NARAL2015<-rbind(ProChoice2015pt1, ProChoice2015pt2, ProChoice2015pt3, ProChoice2015pt4)
NARAL2015$year<-rep(c("2015"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/7720?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2014pt1 <-data.frame(party, office, rating)
ProChoice2014pt1 <- ProChoice2014pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/7720?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2014pt2 <-data.frame(party, office, rating)
ProChoice2014pt2 <- ProChoice2014pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/7720?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2014pt3 <-data.frame(party, office, rating)
ProChoice2014pt3 <- ProChoice2014pt3[1:100,]


NARAL2014<-rbind(ProChoice2014pt1, ProChoice2014pt2, ProChoice2014pt3)
NARAL2014$year<-rep(c("2014"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/7170?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2013pt1 <-data.frame(party, office, rating)
ProChoice2013pt1 <- ProChoice2013pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/7170?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2013pt2 <-data.frame(party, office, rating)
ProChoice2013pt2 <- ProChoice2013pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/7170?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2013pt3 <-data.frame(party, office, rating)
ProChoice2013pt3 <- ProChoice2013pt3[1:100,]


NARAL2013<-rbind(ProChoice2013pt1, ProChoice2013pt2, ProChoice2013pt3)
NARAL2013$year<-rep(c("2013"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/6754?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2012pt1 <-data.frame(party, office, rating)
ProChoice2012pt1 <- ProChoice2012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/6754?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2012pt2 <-data.frame(party, office, rating)
ProChoice2012pt2 <- ProChoice2012pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/6754?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2012pt3 <-data.frame(party, office, rating)
ProChoice2012pt3 <- ProChoice2012pt3[1:100,]

NARAL2012<-rbind(ProChoice2012pt1, ProChoice2012pt2, ProChoice2012pt3)
NARAL2012$year<-rep(c("2012"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/5938?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2011pt1 <-data.frame(party, office, rating)
ProChoice2011pt1 <- ProChoice2011pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/5938?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2011pt2 <-data.frame(party, office, rating)
ProChoice2011pt2 <- ProChoice2011pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/5938?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2011pt3 <-data.frame(party, office, rating)
ProChoice2011pt3 <- ProChoice2011pt3[1:100,]

NARAL2011<-rbind(ProChoice2011pt1, ProChoice2011pt2, ProChoice2011pt3)
NARAL2011$year<-rep(c("2011"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/5741?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2010pt1 <-data.frame(party, office, rating)
ProChoice2010pt1 <- ProChoice2010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/5741?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2010pt2 <-data.frame(party, office, rating)
ProChoice2010pt2 <- ProChoice2010pt2[1:100,]

NARAL2010<-rbind(ProChoice2010pt1, ProChoice2010pt2)
NARAL2010$year<-rep(c("2010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/4759?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2009pt1 <-data.frame(party, office, rating)
ProChoice2009pt1 <- ProChoice2009pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/4759?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2009pt2 <-data.frame(party, office, rating)
ProChoice2009pt2 <- ProChoice2009pt2[1:100,]

NARAL2009<-rbind(ProChoice2009pt1, ProChoice2009pt2)
NARAL2009$year<-rep(c("2009"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/4398")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:84]
office <- office[2:85]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NARAL2008 <-data.frame(party, office, rating)
NARAL2008<- NARAL2008[1:84,]
NARAL2008$year<-rep(c("2008"),times=84)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/3920?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2007pt1 <-data.frame(party, office, rating)
ProChoice2007pt1 <- ProChoice2007pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/3920?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2007pt2 <-data.frame(party, office, rating)
ProChoice2007pt2 <- ProChoice2007pt2[1:100,]

NARAL2007<-rbind(ProChoice2007pt1, ProChoice2007pt2)
NARAL2007$year<-rep(c("2007"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/3599?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2006pt1 <-data.frame(party, office, rating)
ProChoice2006pt1 <- ProChoice2006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/3599?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2006pt2 <-data.frame(party, office, rating)
ProChoice2006pt2 <- ProChoice2006pt2[1:100,]

NARAL2006<-rbind(ProChoice2006pt1, ProChoice2006pt2)
NARAL2006$year<-rep(c("2006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/2745?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2005pt1 <-data.frame(party, office, rating)
ProChoice2005pt1 <- ProChoice2005pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/2745?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2005pt2 <-data.frame(party, office, rating)
ProChoice2005pt2 <- ProChoice2005pt2[1:100,]

NARAL2005<-rbind(ProChoice2005pt1, ProChoice2005pt2)
NARAL2005$year<-rep(c("2005"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/2947?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2004pt1 <-data.frame(party, office, rating)
ProChoice2004pt1 <- ProChoice2004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/2947?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2004pt2 <-data.frame(party, office, rating)
ProChoice2004pt2 <- ProChoice2004pt2[1:100,]

NARAL2004<-rbind(ProChoice2004pt1, ProChoice2004pt2)
NARAL2004$year<-rep(c("2004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/1804?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2003pt1 <-data.frame(party, office, rating)
ProChoice2003pt1 <- ProChoice2003pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/1804?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProChoice2003pt2 <-data.frame(party, office, rating)
ProChoice2003pt2 <- ProChoice2003pt2[1:100,]

NARAL2003<-rbind(ProChoice2003pt1, ProChoice2003pt2)
NARAL2003$year<-rep(c("2003"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/1628?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NARAL2001 <-data.frame(party, office, rating)
NARAL2001 <- NARAL2001[1:100,]
NARAL2001$year<-rep(c("2001"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/1339?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NARAL2000 <-data.frame(party, office, rating)
NARAL2000 <- NARAL2000[1:100,]
NARAL2000$year<-rep(c("2000"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/1002?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NARAL1999 <-data.frame(party, office, rating)
NARAL1999 <- NARAL1999[1:100,]
NARAL1999$year<-rep(c("1999"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1016/rating/112?p=1&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NARAL1997 <-data.frame(party, office, rating)
NARAL1997 <- NARAL1997[1:100,]
NARAL1997$year<-rep(c("1997"),times=100)
```

```{r NARAL manipulation}
NARAL<-rbind(NARAL2019, NARAL2020, NARAL2017, NARAL2015, NARAL2016, NARAL2014, NARAL2013, NARAL2012, NARAL2011, NARAL2010, NARAL2009, NARAL2008, NARAL2007, NARAL2006, NARAL2005, NARAL2004, NARAL2003, NARAL2001, NARAL2000, NARAL1999, NARAL1997)
NARAL[c('x', 'office')] <- str_split_fixed(NARAL$office, ' ', 2)
NARAL[c('office', 'x1')] <- str_split_fixed(NARAL$office, ' ', 2)
NARAL[NARAL==""]<-NA
NARAL[NARAL==" "]<-NA
NARAL <-subset(NARAL, select = -c(x, x1))
NARAL <- NARAL[complete.cases(NARAL),]
senateNARAL <- NARAL %>% filter(NARAL$office=="Senate") #make senate dataset
houseNARAL <- NARAL %>% filter(NARAL$office=="House") 
view(senateNARAL)
view(houseNARAL)
```

```{r webscraping RTL}
url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/12333")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20192020pt1 <-data.frame(party, office, rating)
ProLife20192020pt1 <- ProLife20192020pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/12333?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20192020pt2 <-data.frame(party, office, rating)
ProLife20192020pt2 <- ProLife20192020pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/12333?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20192020pt3 <-data.frame(party, office, rating)
ProLife20192020pt3 <- ProLife20192020pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/12333?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20192020pt4 <-data.frame(party, office, rating)
ProLife20192020pt4 <- ProLife20192020pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/12333?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20192020pt5 <-data.frame(party, office, rating)
ProLife20192020pt5 <- ProLife20192020pt5[1:100,]

RTL20192020<-rbind(ProLife20192020pt1, ProLife20192020pt2, ProLife20192020pt3, ProLife20192020pt4, ProLife20192020pt5)
RTL20192020$year<-rep(c("20192020"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/10293")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20172018pt1 <-data.frame(party, office, rating)
ProLife20172018pt1 <- ProLife20172018pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/10293?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20172018pt2 <-data.frame(party, office, rating)
ProLife20172018pt2 <- ProLife20172018pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/10293?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20172018pt3 <-data.frame(party, office, rating)
ProLife20172018pt3 <- ProLife20172018pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/10293?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20172018pt4 <-data.frame(party, office, rating)
ProLife20172018pt4 <- ProLife20172018pt4[1:100,]

RTL20172018<-rbind(ProLife20172018pt1, ProLife20172018pt2, ProLife20172018pt3, ProLife20172018pt4)
RTL20172018$year<-rep(c("201720178"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/9759")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20152016pt1 <-data.frame(party, office, rating)
ProLife20152016pt1 <- ProLife20152016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/9759?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20152016pt2 <-data.frame(party, office, rating)
ProLife20152016pt2 <- ProLife20152016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/9759?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20152016pt3 <-data.frame(party, office, rating)
ProLife20152016pt3 <- ProLife20152016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/9759?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20152016pt4 <-data.frame(party, office, rating)
ProLife20152016pt4 <- ProLife20152016pt4[1:100,]

RTL20152016<-rbind(ProLife20152016pt1, ProLife20152016pt2, ProLife20152016pt3, ProLife20152016pt4)
RTL20152016$year<-rep(c("20152016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/7227")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife2014pt1 <-data.frame(party, office, rating)
ProLife2014pt1 <- ProLife2014pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/7227?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife2014pt2 <-data.frame(party, office, rating)
ProLife2014pt2 <- ProLife2014pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/7227?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife2014pt3 <-data.frame(party, office, rating)
ProLife2014pt3 <- ProLife2014pt3[1:100,]

RTL2014<-rbind(ProLife2014pt1, ProLife2014pt2, ProLife2014pt3)
RTL2014$year<-rep(c("2014"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/7089")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife2013pt1 <-data.frame(party, office, rating)
ProLife2013pt1 <- ProLife2013pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/7089?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife2013pt2 <-data.frame(party, office, rating)
ProLife2013pt2 <- ProLife2013pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/7089?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife2013pt3 <-data.frame(party, office, rating)
ProLife2013pt3 <- ProLife2013pt3[1:100,]

RTL2013<-rbind(ProLife2013pt1, ProLife2013pt2, ProLife2013pt3)
RTL2013$year<-rep(c("2013"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/6609")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20112012pt1 <-data.frame(party, office, rating)
ProLife20112012pt1 <- ProLife20112012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/6609?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20112012pt2 <-data.frame(party, office, rating)
ProLife20112012pt2 <- ProLife20112012pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/6609?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20112012pt3 <-data.frame(party, office, rating)
ProLife20112012pt3 <- ProLife20112012pt3[1:100,]

RTL20112012<-rbind(ProLife20112012pt1, ProLife20112012pt2, ProLife20112012pt3)
RTL20112012$year<-rep(c("20112012"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/5781")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20092010pt1 <-data.frame(party, office, rating)
ProLife20092010pt1 <- ProLife20092010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/5781?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20092010pt2 <-data.frame(party, office, rating)
ProLife20092010pt2 <- ProLife20092010pt2[1:100,]

RTL20092010<-rbind(ProLife20092010pt1, ProLife20092010pt2)
RTL20092010$year<-rep(c("20092010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/4321")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20072008pt1 <-data.frame(party, office, rating)
ProLife20072008pt1 <- ProLife20072008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/4321?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20072008pt2 <-data.frame(party, office, rating)
ProLife20072008pt2 <- ProLife20072008pt2[1:100,]

RTL20072008<-rbind(ProLife20072008pt1, ProLife20072008pt2)
RTL20072008$year<-rep(c("20072008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/3432")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20052006pt1 <-data.frame(party, office, rating)
ProLife20052006pt1 <- ProLife20052006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/3432?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20052006pt2 <-data.frame(party, office, rating)
ProLife20052006pt2 <- ProLife20052006pt2[1:100,]

RTL20052006<-rbind(ProLife20052006pt1, ProLife20052006pt2)
RTL20052006$year<-rep(c("20052006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/2637")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20032004pt1 <-data.frame(party, office, rating)
ProLife20032004pt1 <- ProLife20032004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/2637?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ProLife20032004pt2 <-data.frame(party, office, rating)
ProLife20032004pt2 <- ProLife20032004pt2[1:100,]

RTL20032004<-rbind(ProLife20032004pt1, ProLife20032004pt2)
RTL20032004$year<-rep(c("20032004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/2075")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
RTL20012002 <-data.frame(party, office, rating)
RTL20012002 <- RTL20012002[1:100,]
RTL20012002$year<-rep(c("20012002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/1242")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
RTL19992000 <-data.frame(party, office, rating)
RTL19992000 <- RTL19992000[1:100,]
RTL19992000$year<-rep(c("19992000"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/252/rating/318")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
RTL19971998 <-data.frame(party, office, rating)
RTL19971998 <- RTL19971998[1:100,]
RTL19971998$year<-rep(c("19971998"),times=100)
```

```{r RTL manipulation}
RTL<-rbind(RTL20192020, RTL20172018, RTL20152016, RTL2013, RTL2014, RTL20112012,  RTL20092010,  RTL20072008, RTL20052006, RTL20032004, RTL20012002, RTL19992000, RTL19971998)
RTL[c('x', 'office')] <- str_split_fixed(RTL$office, ' ', 2)
RTL[c('office', 'x1')] <- str_split_fixed(RTL$office, ' ', 2)
RTL[RTL==""]<-NA
RTL[RTL==" "]<-NA
RTL <-subset(RTL, select = -c(x, x1))
RTL <- RTL[complete.cases(RTL),]
senateRTL <- RTL %>% filter(RTL$office=="Senate") #make senate dataset
houseRTL <- RTL %>% filter(RTL$office=="House") 
view(senateRTL)
view(houseRTL)
```

```{r webscraping ACLU}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/12332")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt1 <-data.frame(party, office, rating)
Civil20192020pt1 <- Civil20192020pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/12332?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt2 <-data.frame(party, office, rating)
Civil20192020pt2 <- Civil20192020pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/12332?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt3 <-data.frame(party, office, rating)
Civil20192020pt3 <- Civil20192020pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/12332?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt4 <-data.frame(party, office, rating)
Civil20192020pt4 <- Civil20192020pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/12332?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt5 <-data.frame(party, office, rating)
Civil20192020pt5 <- Civil20192020pt5[1:100,]

ACLU20192020<-rbind(Civil20192020pt1, Civil20192020pt2, Civil20192020pt3, Civil20192020pt4, Civil20192020pt5)
ACLU20192020$year<-rep(c("20192020"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/10569")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt1 <-data.frame(party, office, rating)
Civil20172018pt1 <- Civil20172018pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/10569?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt2 <-data.frame(party, office, rating)
Civil20172018pt2 <- Civil20172018pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/10569?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt3 <-data.frame(party, office, rating)
Civil20172018pt3 <- Civil20172018pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/10569?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt4 <-data.frame(party, office, rating)
Civil20172018pt4 <- Civil20172018pt4[1:100,]

ACLU20172018<-rbind(Civil20172018pt1, Civil20172018pt2, Civil20172018pt3, Civil20172018pt4)
ACLU20172018$year<-rep(c("20172018"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/9747")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt1 <-data.frame(party, office, rating)
Civil20152016pt1 <- Civil20152016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/9747?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt2 <-data.frame(party, office, rating)
Civil20152016pt2 <- Civil20152016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/9747?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt3 <-data.frame(party, office, rating)
Civil20152016pt3 <- Civil20152016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/9747?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt4 <-data.frame(party, office, rating)
Civil20152016pt4 <- Civil20152016pt4[1:100,]

ACLU20152016<-rbind(Civil20152016pt1, Civil20152016pt2, Civil20152016pt3, Civil20152016pt4)
ACLU20152016$year<-rep(c("20152016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/8571")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20132014pt1 <-data.frame(party, office, rating)
Civil20132014pt1 <- Civil20132014pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/8571?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20132014pt2 <-data.frame(party, office, rating)
Civil20132014pt2 <- Civil20132014pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/8571?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20132014pt3 <-data.frame(party, office, rating)
Civil20132014pt3 <- Civil20132014pt3[1:100,]

ACLU20132014<-rbind(Civil20132014pt1, Civil20132014pt2, Civil20132014pt3)
ACLU20132014$year<-rep(c("20132014"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/6618")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20112012pt1 <-data.frame(party, office, rating)
Civil20112012pt1 <- Civil20112012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/6618?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20112012pt2 <-data.frame(party, office, rating)
Civil20112012pt2 <- Civil20112012pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/6618?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20112012pt3 <-data.frame(party, office, rating)
Civil20112012pt3 <- Civil20112012pt3[1:100,]

ACLU20112012<-rbind(Civil20112012pt1, Civil20112012pt2, Civil20112012pt3)
ACLU20112012$year<-rep(c("20112012"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/6618")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20092010pt1 <-data.frame(party, office, rating)
Civil20092010pt1 <- Civil20092010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/6618?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20092010pt2 <-data.frame(party, office, rating)
Civil20092010pt2 <- Civil20092010pt2[1:100,]

ACLU20092010<-rbind(Civil20092010pt1, Civil20092010pt2)
ACLU20092010$year<-rep(c("20092010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/4397")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20072008pt1 <-data.frame(party, office, rating)
Civil20072008pt1 <- Civil20072008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/4397?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20072008pt2 <-data.frame(party, office, rating)
Civil20072008pt2 <- Civil20072008pt2[1:100,]

ACLU20072008<-rbind(Civil20072008pt1, Civil20072008pt2)
ACLU20072008$year<-rep(c("20072008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/3495")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20052006pt1 <-data.frame(party, office, rating)
Civil20052006pt1 <- Civil20052006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/3495?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20052006pt2 <-data.frame(party, office, rating)
Civil20052006pt2 <- Civil20052006pt2[1:100,]

ACLU20052006<-rbind(Civil20052006pt1, Civil20052006pt2)
ACLU20052006$year<-rep(c("20052006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/2927")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20032004pt1 <-data.frame(party, office, rating)
Civil20032004pt1 <- Civil20032004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/2927?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20032004pt2 <-data.frame(party, office, rating)
Civil20032004pt2 <- Civil20032004pt2[1:100,]

ACLU20032004<-rbind(Civil20032004pt1, Civil20032004pt2)
ACLU20032004$year<-rep(c("20032004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/2033")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ACLU20012002<-data.frame(party, office, rating)
ACLU20012002<- ACLU20012002[1:100,]
ACLU20012002$year<-rep(c("20012002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/1301")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ACLU2000<-data.frame(party, office, rating)
ACLU2000<- ACLU2000[1:100,]
ACLU2000$year<-rep(c("2000"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/793")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ACLU1999<-data.frame(party, office, rating)
ACLU1999<- ACLU1999[1:100,]
ACLU1999$year<-rep(c("1999"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1378/rating/164")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
ACLU19971998<-data.frame(party, office, rating)
ACLU19971998<- ACLU19971998[1:100,]
ACLU19971998$year<-rep(c("19971998"),times=100)
```

```{r ACLU manipulation}
ACLU<-rbind(ACLU20192020, ACLU20172018, ACLU20152016, ACLU20132014, ACLU20112012,  ACLU20092010,  ACLU20072008, ACLU20052006, ACLU20032004, ACLU20012002, ACLU1999, ACLU2000, ACLU19971998)
ACLU[c('x', 'office')] <- str_split_fixed(ACLU$office, ' ', 2)
ACLU[c('office', 'x1')] <- str_split_fixed(ACLU$office, ' ', 2)
ACLU[ACLU==""]<-NA
ACLU[ACLU==" "]<-NA
ACLU <-subset(ACLU, select = -c(x, x1))
ACLU <- ACLU[complete.cases(ACLU),]
senateACLU <- ACLU %>% filter(ACLU$office=="Senate") #make senate dataset
houseACLU <- ACLU %>% filter(ACLU$office=="House") 
view(senateACLU)
view(houseACLU)
```

```{r webscraping HRC}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/12659")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt1 <-data.frame(party, office, rating)
Civil20192020pt1 <- Civil20192020pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/12659?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt2 <-data.frame(party, office, rating)
Civil20192020pt2 <- Civil20192020pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/12659?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt3 <-data.frame(party, office, rating)
Civil20192020pt3 <- Civil20192020pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/12659?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt4 <-data.frame(party, office, rating)
Civil20192020pt4 <- Civil20192020pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/12659?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20192020pt5 <-data.frame(party, office, rating)
Civil20192020pt5 <- Civil20192020pt5[1:100,]

HRC20192020<-rbind(Civil20192020pt1, Civil20192020pt2, Civil20192020pt3, Civil20192020pt4, Civil20192020pt5)
HRC20192020$year<-rep(c("20192020"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/10918")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt1 <-data.frame(party, office, rating)
Civil20172018pt1 <- Civil20172018pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/10918?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt2 <-data.frame(party, office, rating)
Civil20172018pt2 <- Civil20172018pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/10918?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt3 <-data.frame(party, office, rating)
Civil20172018pt3 <- Civil20172018pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/10918?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20172018pt4 <-data.frame(party, office, rating)
Civil20172018pt4 <- Civil20172018pt4[1:100,]

HRC20172018<-rbind(Civil20172018pt1, Civil20172018pt2, Civil20172018pt3, Civil20172018pt4)
HRC20172018$year<-rep(c("20172018"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/9684")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt1 <-data.frame(party, office, rating)
Civil20152016pt1 <- Civil20152016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/9684?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt2 <-data.frame(party, office, rating)
Civil20152016pt2 <- Civil20152016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/9684?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt3 <-data.frame(party, office, rating)
Civil20152016pt3 <- Civil20152016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/9684?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20152016pt4 <-data.frame(party, office, rating)
Civil20152016pt4 <- Civil20152016pt4[1:100,]

HRC20152016<-rbind(Civil20152016pt1, Civil20152016pt2, Civil20152016pt3, Civil20152016pt4)
HRC20152016$year<-rep(c("20152016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/9493")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20132014pt1 <-data.frame(party, office, rating)
Civil20132014pt1 <- Civil20132014pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/9493?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20132014pt2 <-data.frame(party, office, rating)
Civil20132014pt2 <- Civil20132014pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/9493?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20132014pt3 <-data.frame(party, office, rating)
Civil20132014pt3 <- Civil20132014pt3[1:100,]

HRC20132014<-rbind(Civil20132014pt1, Civil20132014pt2, Civil20132014pt3)
HRC20132014$year<-rep(c("20132014"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/6913")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20112012pt1 <-data.frame(party, office, rating)
Civil20112012pt1 <- Civil20112012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/6913?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20112012pt2 <-data.frame(party, office, rating)
Civil20112012pt2 <- Civil20112012pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/6913?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20112012pt3 <-data.frame(party, office, rating)
Civil20112012pt3 <- Civil20112012pt3[1:100,]

HRC20112012<-rbind(Civil20112012pt1, Civil20112012pt2, Civil20112012pt3)
HRC20112012$year<-rep(c("20112012"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/5716")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20092010pt1 <-data.frame(party, office, rating)
Civil20092010pt1 <- Civil20092010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/5716?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20092010pt2 <-data.frame(party, office, rating)
Civil20092010pt2 <- Civil20092010pt2[1:100,]

HRC20092010<-rbind(Civil20092010pt1, Civil20092010pt2)
HRC20092010$year<-rep(c("20092010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/4282")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20072008pt1 <-data.frame(party, office, rating)
Civil20072008pt1 <- Civil20072008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/4282?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20072008pt2 <-data.frame(party, office, rating)
Civil20072008pt2 <- Civil20072008pt2[1:100,]

HRC20072008<-rbind(Civil20072008pt1, Civil20072008pt2)
HRC20072008$year<-rep(c("20072008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/3520")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20052006pt1 <-data.frame(party, office, rating)
Civil20052006pt1 <- Civil20052006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/3520?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20052006pt2 <-data.frame(party, office, rating)
Civil20052006pt2 <- Civil20052006pt2[1:100,]

HRC20052006<-rbind(Civil20052006pt1, Civil20052006pt2)
HRC20052006$year<-rep(c("20052006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/2930")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20032004pt1 <-data.frame(party, office, rating)
Civil20032004pt1 <- Civil20032004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/2930?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Civil20032004pt2 <-data.frame(party, office, rating)
Civil20032004pt2 <- Civil20032004pt2[1:100,]

HRC20032004<-rbind(Civil20032004pt1, Civil20032004pt2)
HRC20032004$year<-rep(c("20032004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/2046")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
HRC20012002 <-data.frame(party, office, rating)
HRC20012002<- HRC20012002[1:100,]
HRC20012002$year<-rep(c("20012002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/1322")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
HRC19992000 <-data.frame(party, office, rating)
HRC19992000<- HRC19992000[1:100,]
HRC19992000$year<-rep(c("19992000"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1256/rating/582")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
HRC19971998 <-data.frame(party, office, rating)
HRC19971998<- HRC19971998[1:100,]
HRC19971998$year<-rep(c("19971998"),times=100)
```

```{r HRC manipulation}
HRC<-rbind(HRC20192020, HRC20172018, HRC20152016, HRC20132014, HRC20112012,  HRC20092010,  HRC20072008, HRC20052006, HRC20032004, HRC20012002, HRC19992000, HRC19971998)
HRC[c('x', 'office')] <- str_split_fixed(HRC$office, ' ', 2)
HRC[c('office', 'x1')] <- str_split_fixed(HRC$office, ' ', 2)
HRC[HRC==""]<-NA
HRC[HRC==" "]<-NA
HRC <-subset(HRC, select = -c(x, x1))
HRC <- HRC[complete.cases(HRC),]
senateHRC <- HRC %>% filter(HRC$office=="Senate") #make senate dataset
houseHRC <- HRC %>% filter(HRC$office=="House") 
view(senateHRC)
view(houseHRC)
```

```{r webscraping CAGW}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12810")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt1 <-data.frame(party, office, rating)
Taxes2020pt1 <- Taxes2020pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12810?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt2 <-data.frame(party, office, rating)
Taxes2020pt2 <- Taxes2020pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12810?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt3 <-data.frame(party, office, rating)
Taxes2020pt3 <- Taxes2020pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12810?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt4 <-data.frame(party, office, rating)
Taxes2020pt4 <- Taxes2020pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12810?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt5 <-data.frame(party, office, rating)
Taxes2020pt5 <- Taxes2020pt5[1:100,]

CAGW2020<-rbind(Taxes2020pt1, Taxes2020pt2, Taxes2020pt3, Taxes2020pt4, Taxes2020pt5)
CAGW2020$year<-rep(c("2020"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12406")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt1 <-data.frame(party, office, rating)
Taxes2019pt1 <- Taxes2019pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12406?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt2 <-data.frame(party, office, rating)
Taxes2019pt2 <- Taxes2019pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12406?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt3 <-data.frame(party, office, rating)
Taxes2019pt3 <- Taxes2019pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12406?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt4 <-data.frame(party, office, rating)
Taxes2019pt4 <- Taxes2019pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/12406?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt5 <-data.frame(party, office, rating)
Taxes2019pt5 <- Taxes2019pt5[1:100,]

CAGW2019<-rbind(Taxes2019pt1, Taxes2019pt2, Taxes2019pt3, Taxes2019pt4, Taxes2019pt5)
CAGW2019$year<-rep(c("2019"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/11451")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt1 <-data.frame(party, office, rating)
Taxes2018pt1 <- Taxes2018pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/11451?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt2 <-data.frame(party, office, rating)
Taxes2018pt2 <- Taxes2018pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/11451?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt3 <-data.frame(party, office, rating)
Taxes2018pt3 <- Taxes2018pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/11451?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt4 <-data.frame(party, office, rating)
Taxes2018pt4 <- Taxes2018pt4[1:100,]

CAGW2018<-rbind(Taxes2018pt1, Taxes2018pt2, Taxes2018pt3, Taxes2018pt4)
CAGW2018$year<-rep(c("2018"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/10350")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2017pt1 <-data.frame(party, office, rating)
Taxes2017pt1 <- Taxes2017pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/10350?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2017pt2 <-data.frame(party, office, rating)
Taxes2017pt2 <- Taxes2017pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/10350?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2017pt3 <-data.frame(party, office, rating)
Taxes2017pt3 <- Taxes2017pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/10350?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2017pt4 <-data.frame(party, office, rating)
Taxes2017pt4 <- Taxes2017pt4[1:100,]

CAGW2017<-rbind(Taxes2017pt1, Taxes2017pt2, Taxes2017pt3, Taxes2017pt4)
CAGW2017$year<-rep(c("2017"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/9976")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt1 <-data.frame(party, office, rating)
Taxes2016pt1 <- Taxes2016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/9976?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt2 <-data.frame(party, office, rating)
Taxes2016pt2 <- Taxes2016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/9976?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt3 <-data.frame(party, office, rating)
Taxes2016pt3 <- Taxes2016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/9976?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt4 <-data.frame(party, office, rating)
Taxes2016pt4 <- Taxes2016pt4[1:100,]

CAGW2016<-rbind(Taxes2016pt1, Taxes2016pt2, Taxes2016pt3, Taxes2016pt4)
CAGW2016$year<-rep(c("2016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/8919")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt1 <-data.frame(party, office, rating)
Taxes2015pt1 <- Taxes2015pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/8919?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt2 <-data.frame(party, office, rating)
Taxes2015pt2 <- Taxes2015pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/8919?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt3 <-data.frame(party, office, rating)
Taxes2015pt3 <- Taxes2015pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/8919?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt4 <-data.frame(party, office, rating)
Taxes2015pt4 <- Taxes2015pt4[1:100,]

CAGW2015<-rbind(Taxes2015pt1, Taxes2015pt2, Taxes2015pt3, Taxes2015pt4)
CAGW2015$year<-rep(c("2015"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/8867")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2014pt1 <-data.frame(party, office, rating)
Taxes2014pt1 <- Taxes2014pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/8867?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2014pt2 <-data.frame(party, office, rating)
Taxes2014pt2 <- Taxes2014pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/8867?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2014pt3 <-data.frame(party, office, rating)
Taxes2014pt3 <- Taxes2014pt3[1:100,]

CAGW2014<-rbind(Taxes2014pt1, Taxes2014pt2, Taxes2014pt3)
CAGW2014$year<-rep(c("2014"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/7301")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2013pt1 <-data.frame(party, office, rating)
Taxes2013pt1 <- Taxes2013pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/7301?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2013pt2 <-data.frame(party, office, rating)
Taxes2013pt2 <- Taxes2013pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/7301?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2013pt3 <-data.frame(party, office, rating)
Taxes2013pt3 <- Taxes2013pt3[1:100,]

CAGW2013<-rbind(Taxes2013pt1, Taxes2013pt2, Taxes2013pt3)
CAGW2013$year<-rep(c("2013"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/6836")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2011pt1 <-data.frame(party, office, rating)
Taxes2011pt1 <- Taxes2011pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/6836?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2011pt2 <-data.frame(party, office, rating)
Taxes2011pt2 <- Taxes2011pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/6836?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2011pt3 <-data.frame(party, office, rating)
Taxes2011pt3 <- Taxes2011pt3[1:100,]

CAGW2011<-rbind(Taxes2011pt1, Taxes2011pt2, Taxes2011pt3)
CAGW2011$year<-rep(c("2011"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/5940")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2010pt1 <-data.frame(party, office, rating)
Taxes2010pt1 <- Taxes2010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/5940?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2010pt2 <-data.frame(party, office, rating)
Taxes2010pt2 <- Taxes2010pt2[1:100,]

CAGW2010<-rbind(Taxes2010pt1, Taxes2010pt2)
CAGW2010$year<-rep(c("2010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/5111")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2009pt1 <-data.frame(party, office, rating)
Taxes2009pt1 <- Taxes2009pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/5111?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2009pt2 <-data.frame(party, office, rating)
Taxes2009pt2 <- Taxes2009pt2[1:100,]

CAGW2009<-rbind(Taxes2009pt1, Taxes2009pt2)
CAGW2009$year<-rep(c("2009"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/4751")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2008pt1 <-data.frame(party, office, rating)
Taxes2008pt1 <- Taxes2008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/4751?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2008pt2 <-data.frame(party, office, rating)
Taxes2008pt2 <- Taxes2008pt2[1:100,]

CAGW2008<-rbind(Taxes2008pt1, Taxes2008pt2)
CAGW2008$year<-rep(c("2008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/4226")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2007pt1 <-data.frame(party, office, rating)
Taxes2007pt1 <- Taxes2007pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/4226?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2007pt2 <-data.frame(party, office, rating)
Taxes2007pt2 <- Taxes2007pt2[1:100,]

CAGW2007<-rbind(Taxes2007pt1, Taxes2007pt2)
CAGW2007$year<-rep(c("2007"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/3522")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes20052006pt1 <-data.frame(party, office, rating)
Taxes20052006pt1 <- Taxes20052006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/3522?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes20052006pt2 <-data.frame(party, office, rating)
Taxes20052006pt2 <- Taxes20052006pt2[1:100,]

CAGW20052006<-rbind(Taxes20052006pt1, Taxes20052006pt2)
CAGW20052006$year<-rep(c("20052006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/2260")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2004pt1 <-data.frame(party, office, rating)
Taxes2004pt1 <- Taxes2004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/2260?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2004pt2 <-data.frame(party, office, rating)
Taxes2004pt2 <- Taxes2004pt2[1:100,]

CAGW2004<-rbind(Taxes2004pt1, Taxes2004pt2)
CAGW2004$year<-rep(c("2004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/2426")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2003pt1 <-data.frame(party, office, rating)
Taxes2003pt1 <- Taxes2003pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/2426?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2003pt2 <-data.frame(party, office, rating)
Taxes2003pt2 <- Taxes2003pt2[1:100,]

CAGW2003<-rbind(Taxes2003pt1, Taxes2003pt2)
CAGW2003$year<-rep(c("2003"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/2470")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CAGW2002 <-data.frame(party, office, rating)
CAGW2002 <- CAGW2002[1:100,]
CAGW2002$year<-rep(c("2002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/1795")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CAGW2001 <-data.frame(party, office, rating)
CAGW2001 <- CAGW2001[1:100,]
CAGW2001$year<-rep(c("2001"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/1478")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CAGW2000 <-data.frame(party, office, rating)
CAGW2000 <- CAGW2000[1:100,]
CAGW2000$year<-rep(c("2000"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/984")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CAGW1999 <-data.frame(party, office, rating)
CAGW1999 <- CAGW1999[1:100,]
CAGW1999$year<-rep(c("1999"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/624")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CAGW1998 <-data.frame(party, office, rating)
CAGW1998 <- CAGW1998[1:100,]
CAGW1998$year<-rep(c("1998"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/13/rating/653")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CAGW1997 <-data.frame(party, office, rating)
CAGW1997 <- CAGW1997[1:100,]
CAGW1997$year<-rep(c("1997"),times=100)
```


```{r CAGW manipulation}
CAGW<-rbind(CAGW2020, CAGW2019, CAGW2018, CAGW2017, CAGW2016, CAGW2015, CAGW2014, CAGW2013, CAGW2011, CAGW2010, CAGW2009, CAGW2008, CAGW2007, CAGW20052006, CAGW2004, CAGW2003, CAGW2002, CAGW2001, CAGW2000, CAGW1999, CAGW1998, CAGW1997)
CAGW[c('x', 'office')] <- str_split_fixed(CAGW$office, ' ', 2)
CAGW[c('office', 'x1')] <- str_split_fixed(CAGW$office, ' ', 2)
CAGW[CAGW==""]<-NA
CAGW[CAGW==" "]<-NA
CAGW <-subset(CAGW, select = -c(x, x1))
CAGW <- CAGW[complete.cases(CAGW),]
senateCAGW <- CAGW %>% filter(CAGW$office=="Senate") #make senate dataset
houseCAGW <- CAGW %>% filter(CAGW$office=="House") 
view(senateCAGW)
view(houseCAGW)
```

```{r webscraping NTU}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12765")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt1 <-data.frame(party, office, rating)
Taxes2020pt1 <- Taxes2020pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12765?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt2 <-data.frame(party, office, rating)
Taxes2020pt2 <- Taxes2020pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12765?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt3 <-data.frame(party, office, rating)
Taxes2020pt3 <- Taxes2020pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12765?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt4 <-data.frame(party, office, rating)
Taxes2020pt4 <- Taxes2020pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12765?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2020pt5 <-data.frame(party, office, rating)
Taxes2020pt5 <- Taxes2020pt5[1:100,]

NTU2020<-rbind(Taxes2020pt1, Taxes2020pt2, Taxes2020pt3, Taxes2020pt4, Taxes2020pt5)
NTU2020$year<-rep(c("2020"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12405")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt1 <-data.frame(party, office, rating)
Taxes2019pt1 <- Taxes2019pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12405?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt2 <-data.frame(party, office, rating)
Taxes2019pt2 <- Taxes2019pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12405?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt3 <-data.frame(party, office, rating)
Taxes2019pt3 <- Taxes2019pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12405?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt4 <-data.frame(party, office, rating)
Taxes2019pt4 <- Taxes2019pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/12405?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2019pt5 <-data.frame(party, office, rating)
Taxes2019pt5 <- Taxes2019pt5[1:100,]

NTU2019<-rbind(Taxes2019pt1, Taxes2019pt2, Taxes2019pt3, Taxes2019pt4, Taxes2019pt5)
NTU2019$year<-rep(c("2019"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/11459")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt1 <-data.frame(party, office, rating)
Taxes2018pt1 <- Taxes2018pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/11459?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt2 <-data.frame(party, office, rating)
Taxes2018pt2 <- Taxes2018pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/11459?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt3 <-data.frame(party, office, rating)
Taxes2018pt3 <- Taxes2018pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/11459?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2018pt4 <-data.frame(party, office, rating)
Taxes2018pt4 <- Taxes2018pt4[1:100,]

NTU2018<-rbind(Taxes2018pt1, Taxes2018pt2, Taxes2018pt3, Taxes2018pt4)
NTU2018$year<-rep(c("2018"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/10246")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt1 <-data.frame(party, office, rating)
Taxes2016pt1 <- Taxes2016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/10246?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt2 <-data.frame(party, office, rating)
Taxes2016pt2 <- Taxes2016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/10246?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt3 <-data.frame(party, office, rating)
Taxes2016pt3 <- Taxes2016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/10246?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2016pt4 <-data.frame(party, office, rating)
Taxes2016pt4 <- Taxes2016pt4[1:100,]

NTU2016<-rbind(Taxes2016pt1, Taxes2016pt2, Taxes2016pt3, Taxes2016pt4)
NTU2016$year<-rep(c("2016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/9760")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt1 <-data.frame(party, office, rating)
Taxes2015pt1 <- Taxes2015pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/9760?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt2 <-data.frame(party, office, rating)
Taxes2015pt2 <- Taxes2015pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/9760?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt3 <-data.frame(party, office, rating)
Taxes2015pt3 <- Taxes2015pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/9760?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2015pt4 <-data.frame(party, office, rating)
Taxes2015pt4 <- Taxes2015pt4[1:100,]

NTU2015<-rbind(Taxes2015pt1, Taxes2015pt2, Taxes2015pt3, Taxes2015pt4)
NTU2015$year<-rep(c("2015"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/7675")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2013pt1 <-data.frame(party, office, rating)
Taxes2013pt1 <- Taxes2013pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/7675?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2013pt2 <-data.frame(party, office, rating)
Taxes2013pt2 <- Taxes2013pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/7675?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2013pt3 <-data.frame(party, office, rating)
Taxes2013pt3 <- Taxes2013pt3[1:100,]

NTU2013<-rbind(Taxes2013pt1, Taxes2013pt2, Taxes2013pt3)
NTU2013$year<-rep(c("2013"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/6954")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2012pt1 <-data.frame(party, office, rating)
Taxes2012pt1 <- Taxes2012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/6954?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2012pt2 <-data.frame(party, office, rating)
Taxes2012pt2 <- Taxes2012pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/6954?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2012pt3 <-data.frame(party, office, rating)
Taxes2012pt3 <- Taxes2012pt3[1:100,]

NTU2012<-rbind(Taxes2012pt1, Taxes2012pt2, Taxes2012pt3)
NTU2012$year<-rep(c("2012"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/5941")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2011pt1 <-data.frame(party, office, rating)
Taxes2011pt1 <- Taxes2011pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/5941?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2011pt2 <-data.frame(party, office, rating)
Taxes2011pt2 <- Taxes2011pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/5941?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2011pt3 <-data.frame(party, office, rating)
Taxes2011pt3 <- Taxes2011pt3[1:100,]

NTU2011<-rbind(Taxes2011pt1, Taxes2011pt2, Taxes2011pt3)
NTU2011$year<-rep(c("2011"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/5836")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2010pt1 <-data.frame(party, office, rating)
Taxes2010pt1 <- Taxes2010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/5836?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2010pt2 <-data.frame(party, office, rating)
Taxes2010pt2 <- Taxes2010pt2[1:100,]

NTU2010<-rbind(Taxes2010pt1, Taxes2010pt2)
NTU2010$year<-rep(c("2010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/4765")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2009pt1 <-data.frame(party, office, rating)
Taxes2009pt1 <- Taxes2009pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/4765?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2009pt2 <-data.frame(party, office, rating)
Taxes2009pt2 <- Taxes2009pt2[1:100,]

NTU2009<-rbind(Taxes2009pt1, Taxes2009pt2)
NTU2009$year<-rep(c("2009"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/3566")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2006pt1 <-data.frame(party, office, rating)
Taxes2006pt1 <- Taxes2006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/3566?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2006pt2 <-data.frame(party, office, rating)
Taxes2006pt2 <- Taxes2006pt2[1:100,]

NTU2006<-rbind(Taxes2006pt1, Taxes2006pt2)
NTU2006$year<-rep(c("2006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/3157")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2005pt1 <-data.frame(party, office, rating)
Taxes2005pt1 <- Taxes2005pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/3157?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2005pt2 <-data.frame(party, office, rating)
Taxes2005pt2 <- Taxes2005pt2[1:100,]

NTU2005<-rbind(Taxes2005pt1, Taxes2005pt2)
NTU2005$year<-rep(c("2005"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/1065")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2004pt1 <-data.frame(party, office, rating)
Taxes2004pt1 <- Taxes2004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/1065?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2004pt2 <-data.frame(party, office, rating)
Taxes2004pt2 <- Taxes2004pt2[1:100,]

NTU2004<-rbind(Taxes2004pt1, Taxes2004pt2)
NTU2004$year<-rep(c("2004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/2497")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2003pt1 <-data.frame(party, office, rating)
Taxes2003pt1 <- Taxes2003pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/2497?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Taxes2003pt2 <-data.frame(party, office, rating)
Taxes2003pt2 <- Taxes2003pt2[1:100,]

NTU2003<-rbind(Taxes2003pt1, Taxes2003pt2)
NTU2003$year<-rep(c("2003"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/2111")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NTU2002 <-data.frame(party, office, rating)
NTU2002 <- NTU2002[1:100,]
NTU2002$year<-rep(c("2002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/1652")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NTU2001 <-data.frame(party, office, rating)
NTU2001 <- NTU2001[1:100,]
NTU2001$year<-rep(c("2001"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/975")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NTU1999<-data.frame(party, office, rating)
NTU1999 <- NTU1999[1:100,]
NTU1999$year<-rep(c("1999"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/681")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NTU1998 <-data.frame(party, office, rating)
NTU1998 <- NTU1998[1:100,]
NTU1998$year<-rep(c("1998"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/872/rating/133")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
NTU1997 <-data.frame(party, office, rating)
NTU1997 <- NTU1997[1:100,]
NTU1997$year<-rep(c("1997"),times=100)
```

```{r NTU manipulation}
NTU<-rbind(NTU2020, NTU2019, NTU2018, NTU2016, NTU2015,  NTU2013, NTU2011, NTU2010, NTU2009,  NTU2005, NTU2006, NTU2004, NTU2003, NTU2002, NTU2001,  NTU1999, NTU1998, NTU1997)
NTU[c('x', 'office')] <- str_split_fixed(NTU$office, ' ', 2)
NTU[c('office', 'x1')] <- str_split_fixed(NTU$office, ' ', 2)
NTU[NTU==""]<-NA
NTU[NTU==" "]<-NA
NTU <-subset(NTU, select = -c(x, x1))
NTU <- NTU[complete.cases(NTU),]
senateNTU <- NTU %>% filter(NTU$office=="Senate") #make senate dataset
houseNTU <- NTU %>% filter(NTU$office=="House") 
view(senateNTU)
view(houseNTU)
```

```{r webscraping APHA}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/10583")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2017pt1 <-data.frame(party, office, rating)
Health2017pt1 <- Health2017pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/10583?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2017pt2 <-data.frame(party, office, rating)
Health2017pt2 <- Health2017pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/10583?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2017pt3 <-data.frame(party, office, rating)
Health2017pt3 <- Health2017pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/10583?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2017pt4 <-data.frame(party, office, rating)
Health2017pt4 <- Health2017pt4[1:100,]

APHA2017<-rbind(Health2017pt1, Health2017pt2, Health2017pt3, Health2017pt4)
APHA2017$year<-rep(c("2017"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9963")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2016pt1 <-data.frame(party, office, rating)
Health2016pt1 <- Health2016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9963?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2016pt2 <-data.frame(party, office, rating)
Health2016pt2 <- Health2016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9963?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2016pt3 <-data.frame(party, office, rating)
Health2016pt3 <- Health2016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9963?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2016pt4 <-data.frame(party, office, rating)
Health2016pt4 <- Health2016pt4[1:100,]

APHA2016<-rbind(Health2016pt1, Health2016pt2, Health2016pt3, Health2016pt4)
APHA2016$year<-rep(c("2016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9810")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2015pt1 <-data.frame(party, office, rating)
Health2015pt1 <- Health2015pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9810?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2015pt2 <-data.frame(party, office, rating)
Health2015pt2 <- Health2015pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9810?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2015pt3 <-data.frame(party, office, rating)
Health2015pt3 <- Health2015pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/9810?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2015pt4 <-data.frame(party, office, rating)
Health2015pt4 <- Health2015pt4[1:100,]

APHA2015<-rbind(Health2015pt1, Health2015pt2, Health2015pt3, Health2015pt4)
APHA2015$year<-rep(c("2015"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/7172")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2013pt1 <-data.frame(party, office, rating)
Health2013pt1 <- Health2013pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/7172?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2013pt2 <-data.frame(party, office, rating)
Health2013pt2 <- Health2013pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/7172?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2013pt3 <-data.frame(party, office, rating)
Health2013pt3 <- Health2013pt3[1:100,]

APHA2013<-rbind(Health2013pt1, Health2013pt2, Health2013pt3)
APHA2013$year<-rep(c("2013"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/5829")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2010pt1 <-data.frame(party, office, rating)
Health2010pt1 <- Health2010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/5829?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2010pt2 <-data.frame(party, office, rating)
Health2010pt2 <- Health2010pt2[1:100,]

APHA2010<-rbind(Health2010pt1, Health2010pt2)
APHA2010$year<-rep(c("2010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/4871")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2009pt1 <-data.frame(party, office, rating)
Health2009pt1 <- Health2009pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/4871?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2009pt2 <-data.frame(party, office, rating)
Health2009pt2 <- Health2009pt2[1:100,]

APHA2009<-rbind(Health2009pt1, Health2009pt2)
APHA2009$year<-rep(c("2009"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/4870")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2008pt1 <-data.frame(party, office, rating)
Health2008pt1 <- Health2008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/4870?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2008pt2 <-data.frame(party, office, rating)
Health2008pt2 <- Health2008pt2[1:100,]

APHA2008<-rbind(Health2008pt1, Health2008pt2)
APHA2008$year<-rep(c("2008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/4869")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2007pt1 <-data.frame(party, office, rating)
Health2007pt1 <- Health2007pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/4869?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2007pt2 <-data.frame(party, office, rating)
Health2007pt2 <- Health2007pt2[1:100,]

APHA2007<-rbind(Health2007pt1, Health2007pt2)
APHA2007$year<-rep(c("2007"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/3551")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2006pt1 <-data.frame(party, office, rating)
Health2006pt1 <- Health2006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/3551?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2006pt2 <-data.frame(party, office, rating)
Health2006pt2 <- Health2006pt2[1:100,]

APHA2006<-rbind(Health2006pt1, Health2006pt2)
APHA2006$year<-rep(c("2006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/1350")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2005pt1 <-data.frame(party, office, rating)
Health2005pt1 <- Health2005pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/1350?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2005pt2 <-data.frame(party, office, rating)
Health2005pt2 <- Health2005pt2[1:100,]

APHA2005<-rbind(Health2005pt1, Health2005pt2)
APHA2005$year<-rep(c("2005"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/2993")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2004pt1 <-data.frame(party, office, rating)
Health2004pt1 <- Health2004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/2993?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2004pt2 <-data.frame(party, office, rating)
Health2004pt2 <- Health2004pt2[1:100,]

APHA2004<-rbind(Health2004pt1, Health2004pt2)
APHA2004$year<-rep(c("2004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/2478")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2003pt1 <-data.frame(party, office, rating)
Health2003pt1 <- Health2003pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/2478?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Health2003pt2 <-data.frame(party, office, rating)
Health2003pt2 <- Health2003pt2[1:100,]

APHA2003<-rbind(Health2003pt1, Health2003pt2)
APHA2003$year<-rep(c("2003"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/2248")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
APHA2002 <-data.frame(party, office, rating)
APHA2002 <- APHA2002[1:100,]
APHA2002$year<-rep(c("2002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/1631")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
APHA2001 <-data.frame(party, office, rating)
APHA2001 <- APHA2001[1:100,]
APHA2001$year<-rep(c("2001"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/1372")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
APHA2000 <-data.frame(party, office, rating)
APHA2000 <- APHA2000[1:100,]
APHA2000$year<-rep(c("2000"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/809")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
APHA1999 <-data.frame(party, office, rating)
APHA1999 <- APHA1999[1:100,]
APHA1999$year<-rep(c("1999"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/590")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
APHA1998 <-data.frame(party, office, rating)
APHA1998 <- APHA1998[1:100,]
APHA1998$year<-rep(c("1998"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/884/rating/123")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
APHA1997 <-data.frame(party, office, rating)
APHA1997 <- APHA1997[1:100,]
APHA1997$year<-rep(c("1997"),times=100)
```

```{r APHA manipulation}
APHA<-rbind(APHA2017,  APHA2016, APHA2015,  APHA2013, APHA2010, APHA2009,  APHA2008, APHA2007, APHA2005, APHA2006, APHA2004, APHA2003, APHA2002, APHA2001,  APHA2000, APHA1999, APHA1998, APHA1997)
APHA[c('x', 'office')] <- str_split_fixed(APHA$office, ' ', 2)
APHA[c('office', 'x1')] <- str_split_fixed(APHA$office, ' ', 2)
APHA[APHA==""]<-NA
APHA[APHA==" "]<-NA
APHA <-subset(APHA, select = -c(x, x1))
APHA <- APHA[complete.cases(APHA),]
senateAPHA <- APHA %>% filter(APHA$office=="Senate") #make senate dataset
houseAPHA <- APHA %>% filter(APHA$office=="House") 
view(senateAPHA)
view(houseAPHA)
```

```{r webscraping CFLW}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/8833")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20152016pt1 <-data.frame(party, office, rating)
Defense20152016pt1 <- Defense20152016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/8833?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20152016pt2 <-data.frame(party, office, rating)
Defense20152016pt2 <- Defense20152016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/8833?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20152016pt3 <-data.frame(party, office, rating)
Defense20152016pt3 <- Defense20152016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/8833?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20152016pt4 <-data.frame(party, office, rating)
Defense20152016pt4 <- Defense20152016pt4[1:100,]

CFLW20152016<-rbind(Defense20152016pt1, Defense20152016pt2, Defense20152016pt3, Defense20152016pt4)
CFLW20152016$year<-rep(c("20152016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/7295")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20132014pt1 <-data.frame(party, office, rating)
Defense20132014pt1 <- Defense20132014pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/7295?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20132014pt2 <-data.frame(party, office, rating)
Defense20132014pt2 <- Defense20132014pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/7295?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20132014pt3 <-data.frame(party, office, rating)
Defense20132014pt3 <- Defense20132014pt3[1:100,]

CFLW20132014<-rbind(Defense20132014pt1, Defense20132014pt2, Defense20132014pt3)
CFLW20132014$year<-rep(c("20132014"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/9638")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20112012pt1 <-data.frame(party, office, rating)
Defense20112012pt1 <- Defense20112012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/9638?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20112012pt2 <-data.frame(party, office, rating)
Defense20112012pt2 <- Defense20112012pt2[1:100,]

CFLW20112012<-rbind(Defense20112012pt1, Defense20112012pt2)
CFLW20112012$year<-rep(c("20112012"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/5962")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20092010pt1 <-data.frame(party, office, rating)
Defense20092010pt1 <- Defense20092010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/5962?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20092010pt2 <-data.frame(party, office, rating)
Defense20092010pt2 <- Defense20092010pt2[1:100,]

CFLW20092010<-rbind(Defense20092010pt1, Defense20092010pt2)
CFLW20092010$year<-rep(c("20092010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/4413")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20072008pt1 <-data.frame(party, office, rating)
Defense20072008pt1 <- Defense20072008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/4413?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense20072008pt2 <-data.frame(party, office, rating)
Defense20072008pt2 <- Defense20072008pt2[1:100,]

CFLW20072008<-rbind(Defense20072008pt1, Defense20072008pt2)
CFLW20072008$year<-rep(c("20072008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/3519")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:99]
office <- office[2:100]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CFLW20052006 <-data.frame(party, office, rating)
CFLW20052006 <- CFLW20052006[1:99,]
CFLW20052006$year<-rep(c("20052006"),times=99)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/10095")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CFLW20032004 <-data.frame(party, office, rating)
CFLW20032004 <- CFLW20032004[1:100,]
CFLW20032004$year<-rep(c("20032004"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/1337")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CFLW20012002 <-data.frame(party, office, rating)
CFLW20012002 <- CFLW20012002[1:100,]
CFLW20012002$year<-rep(c("20012002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/101/rating/10094")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
CFLW19992000 <-data.frame(party, office, rating)
CFLW19992000 <- CFLW19992000[1:100,]
CFLW19992000$year<-rep(c("19992000"),times=100)
```

```{r CFLW manipulation}
CFLW<-rbind(CFLW20152016, CFLW20132014, CFLW20112012,  CFLW20092010,  CFLW20072008, CFLW20052006, CFLW20032004, CFLW20012002, CFLW19992000)
CFLW[c('x', 'office')] <- str_split_fixed(CFLW$office, ' ', 2)
CFLW[c('office', 'x1')] <- str_split_fixed(CFLW$office, ' ', 2)
CFLW[CFLW==""]<-NA
CFLW[CFLW==" "]<-NA
CFLW <-subset(CFLW, select = -c(x, x1))
CFLW <- CFLW[complete.cases(CFLW),]
senateCFLW <- CFLW %>% filter(CFLW$office=="Senate") #make senate dataset
houseCFLW <- CFLW %>% filter(CFLW$office=="House") 
view(senateCFLW)
view(houseCFLW)
```

```{r webscraping PA}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/9966")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2015pt1 <-data.frame(party, office, rating)
Defense2015pt1 <- Defense2015pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/9966?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2015pt2 <-data.frame(party, office, rating)
Defense2015pt2 <- Defense2015pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/9966?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2015pt3 <-data.frame(party, office, rating)
Defense2015pt3 <- Defense2015pt3[1:100,]

PA2015<-rbind(Defense2015pt1, Defense2015pt2, Defense2015pt3)
PA2015$year<-rep(c("2015"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12477")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2013pt1 <-data.frame(party, office, rating)
Defense2013pt1 <- Defense2013pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12477?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2013pt2 <-data.frame(party, office, rating)
Defense2013pt2 <- Defense2013pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12477?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2013pt3 <-data.frame(party, office, rating)
Defense2013pt3 <- Defense2013pt3[1:100,]

PA2013<-rbind(Defense2013pt1, Defense2013pt2, Defense2013pt3)
PA2013$year<-rep(c("2013"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/6770")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2012pt1 <-data.frame(party, office, rating)
Defense2012pt1 <- Defense2012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/6770?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2012pt2 <-data.frame(party, office, rating)
Defense2012pt2 <- Defense2012pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/6770?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2012pt3 <-data.frame(party, office, rating)
Defense2012pt3 <- Defense2012pt3[1:100,]

PA2012<-rbind(Defense2012pt1, Defense2012pt2, Defense2012pt3)
PA2012$year<-rep(c("2012"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12481")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2011pt1 <-data.frame(party, office, rating)
Defense2011pt1 <- Defense2011pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12481?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2011pt2 <-data.frame(party, office, rating)
Defense2011pt2 <- Defense2011pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12481?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2011pt3 <-data.frame(party, office, rating)
Defense2011pt3 <- Defense2011pt3[1:100,]

PA2011<-rbind(Defense2011pt1, Defense2011pt2, Defense2011pt3)
PA2011$year<-rep(c("2011"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/5844")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2010pt1 <-data.frame(party, office, rating)
Defense2010pt1 <- Defense2010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/5844?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2010pt2 <-data.frame(party, office, rating)
Defense2010pt2 <- Defense2010pt2[1:100,]

PA2010<-rbind(Defense2010pt1, Defense2010pt2)
PA2010$year<-rep(c("2010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12480")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2009pt1 <-data.frame(party, office, rating)
Defense2009pt1 <- Defense2009pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12480?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2009pt2 <-data.frame(party, office, rating)
Defense2009pt2 <- Defense2009pt2[1:100,]

PA2009<-rbind(Defense2009pt1, Defense2009pt2)
PA2009$year<-rep(c("2009"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12479")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2008pt1 <-data.frame(party, office, rating)
Defense2008pt1 <- Defense2008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12479?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2008pt2 <-data.frame(party, office, rating)
Defense2008pt2 <- Defense2008pt2[1:100,]

PA2008<-rbind(Defense2008pt1, Defense2008pt2)
PA2008$year<-rep(c("2008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12478")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2007pt1 <-data.frame(party, office, rating)
Defense2007pt1 <- Defense2007pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/12478?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2007pt2 <-data.frame(party, office, rating)
Defense2007pt2 <- Defense2007pt2[1:100,]

PA2007<-rbind(Defense2007pt1, Defense2007pt2)
PA2007$year<-rep(c("2007"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/3716")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2006pt1 <-data.frame(party, office, rating)
Defense2006pt1 <- Defense2006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/3716?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2006pt2 <-data.frame(party, office, rating)
Defense2006pt2 <- Defense2006pt2[1:100,]

PA2006<-rbind(Defense2006pt1, Defense2006pt2)
PA2006$year<-rep(c("2006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/3216")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2005pt1 <-data.frame(party, office, rating)
Defense2005pt1 <- Defense2005pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/3216?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2005pt2 <-data.frame(party, office, rating)
Defense2005pt2 <- Defense2005pt2[1:100,]

PA2005<-rbind(Defense2005pt1, Defense2005pt2)
PA2005$year<-rep(c("2005"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/2121")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2004pt1 <-data.frame(party, office, rating)
Defense2004pt1 <- Defense2004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/2121?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2004pt2 <-data.frame(party, office, rating)
Defense2004pt2 <- Defense2004pt2[1:100,]

PA2004<-rbind(Defense2004pt1, Defense2004pt2)
PA2004$year<-rep(c("2004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/2414")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2003pt1 <-data.frame(party, office, rating)
Defense2003pt1 <- Defense2003pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/2414?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Defense2003pt2 <-data.frame(party, office, rating)
Defense2003pt2 <- Defense2003pt2[1:100,]

PA2003<-rbind(Defense2003pt1, Defense2003pt2)
PA2003$year<-rep(c("2003"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/2078")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
PA2002 <-data.frame(party, office, rating)
PA2002 <- PA2002[1:100,]
PA2002$year<-rep(c("2002"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/1654#")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
PA2001 <-data.frame(party, office, rating)
PA2001 <- PA2001[1:100,]
PA2001$year<-rep(c("2001"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/1348")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
PA2000 <-data.frame(party, office, rating)
PA2000 <- PA2000[1:100,]
PA2000$year<-rep(c("2000"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/783#")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
PA1999 <-data.frame(party, office, rating)
PA1999 <- PA1999[1:100,]
PA1999$year<-rep(c("1999"),times=100)

url <- read_html("https://justfacts.votesmart.org/interest-group/1110/rating/605")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
PA1998 <-data.frame(party, office, rating)
PA1998 <- PA1998[1:100,]
PA1998$year<-rep(c("1998"),times=100)
```

```{r PA manipulation}
PA<-rbind(PA2015,  PA2013, PA2012, PA2011, PA2010, PA2009,  PA2008, PA2007, PA2005, PA2006, PA2004, PA2003, PA2002, PA2001,  PA2000, PA1999, PA1998)
PA[c('x', 'office')] <- str_split_fixed(PA$office, ' ', 2)
PA[c('office', 'x1')] <- str_split_fixed(PA$office, ' ', 2)
PA[PA==""]<-NA
PA[PA==" "]<-NA
PA <-subset(PA, select = -c(x, x1))
PA <- PA[complete.cases(PA),]
senatePA <- PA %>% filter(PA$office=="Senate") #make senate dataset
housePA <- PA %>% filter(PA$office=="House") 
view(senatePA)
view(housePA)
```

```{r webscraping DWAF}
library(rvest)
library(tidyverse)
library(dplyr)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12754")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2020pt1 <-data.frame(party, office, rating)
Envir2020pt1 <- Envir2020pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12754?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2020pt2 <-data.frame(party, office, rating)
Envir2020pt2 <- Envir2020pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12754?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2020pt3 <-data.frame(party, office, rating)
Envir2020pt3 <- Envir2020pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12754?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2020pt4 <-data.frame(party, office, rating)
Envir2020pt4 <- Envir2020pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12754?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2020pt5 <-data.frame(party, office, rating)
Envir2020pt5 <- Envir2020pt5[1:100,]

DWAF2020<-rbind(Envir2020pt1, Envir2020pt2, Envir2020pt3, Envir2020pt4, Envir2020pt5)
DWAF2020$year<-rep(c("2020"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12391")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2019pt1 <-data.frame(party, office, rating)
Envir2019pt1 <- Envir2019pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12391?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2019pt2 <-data.frame(party, office, rating)
Envir2019pt2 <- Envir2019pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12391?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2019pt3 <-data.frame(party, office, rating)
Envir2019pt3 <- Envir2019pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12391?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2019pt4 <-data.frame(party, office, rating)
Envir2019pt4 <- Envir2019pt4[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12391?p=5&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2019pt5 <-data.frame(party, office, rating)
Envir2019pt5 <- Envir2019pt5[1:100,]

DWAF2019<-rbind(Envir2019pt1, Envir2019pt2, Envir2019pt3, Envir2019pt4, Envir2019pt5)
DWAF2019$year<-rep(c("2019"),times=500)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12391")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2018pt1 <-data.frame(party, office, rating)
Envir2018pt1 <- Envir2018pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12389?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2018pt2 <-data.frame(party, office, rating)
Envir2018pt2 <- Envir2018pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12389?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2018pt3 <-data.frame(party, office, rating)
Envir2018pt3 <- Envir2018pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/12389?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2018pt4 <-data.frame(party, office, rating)
Envir2018pt4 <- Envir2018pt4[1:100,]

DWAF2018<-rbind(Envir2018pt1, Envir2018pt2, Envir2018pt3, Envir2018pt4)
DWAF2018$year<-rep(c("2018"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/10567")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2017pt1 <-data.frame(party, office, rating)
Envir2017pt1 <- Envir2017pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/10567?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2017pt2 <-data.frame(party, office, rating)
Envir2017pt2 <- Envir2017pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/10567?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2017pt3 <-data.frame(party, office, rating)
Envir2017pt3 <- Envir2017pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/10567?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2017pt4 <-data.frame(party, office, rating)
Envir2017pt4 <- Envir2017pt4[1:100,]

DWAF2017<-rbind(Envir2017pt1, Envir2017pt2, Envir2017pt3, Envir2017pt4)
DWAF2017$year<-rep(c("2017"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/9812")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2016pt1 <-data.frame(party, office, rating)
Envir2016pt1 <- Envir2016pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/9812?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2016pt2 <-data.frame(party, office, rating)
Envir2016pt2 <- Envir2016pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/9812?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2016pt3 <-data.frame(party, office, rating)
Envir2016pt3 <- Envir2016pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/9812?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2016pt4 <-data.frame(party, office, rating)
Envir2016pt4 <- Envir2016pt4[1:100,]

DWAF2016<-rbind(Envir2016pt1, Envir2016pt2, Envir2016pt3, Envir2016pt4)
DWAF2016$year<-rep(c("2016"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/8955")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2015pt1 <-data.frame(party, office, rating)
Envir2015pt1 <- Envir2015pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/8955?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2015pt2 <-data.frame(party, office, rating)
Envir2015pt2 <- Envir2015pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/8955?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2015pt3 <-data.frame(party, office, rating)
Envir2015pt3 <- Envir2015pt3[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/8955?p=4&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2015pt4 <-data.frame(party, office, rating)
Envir2015pt4 <- Envir2015pt4[1:100,]

DWAF2015<-rbind(Envir2015pt1, Envir2015pt2, Envir2015pt3, Envir2015pt4)
DWAF2015$year<-rep(c("2015"),times=400)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/7145")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2013pt1 <-data.frame(party, office, rating)
Envir2013pt1 <- Envir2013pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/7145?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2013pt2 <-data.frame(party, office, rating)
Envir2013pt2 <- Envir2013pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/7145?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2013pt3 <-data.frame(party, office, rating)
Envir2013pt3 <- Envir2013pt3[1:100,]

DWAF2013<-rbind(Envir2013pt1, Envir2013pt2, Envir2013pt3)
DWAF2013$year<-rep(c("2013"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/6765")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20112012pt1 <-data.frame(party, office, rating)
Envir20112012pt1 <- Envir20112012pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/6765?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20112012pt2 <-data.frame(party, office, rating)
Envir20112012pt2 <- Envir20112012pt2[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/6765?p=3&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20112012pt3 <-data.frame(party, office, rating)
Envir20112012pt3 <- Envir20112012pt3[1:100,]

DWAF20112012<-rbind(Envir20112012pt1, Envir20112012pt2, Envir20112012pt3)
DWAF20112012$year<-rep(c("20112012"),times=300)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/5694")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20092010pt1 <-data.frame(party, office, rating)
Envir20092010pt1 <- Envir20092010pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/5694?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20092010pt2 <-data.frame(party, office, rating)
Envir20092010pt2 <- Envir20092010pt2[1:100,]

DWAF20092010<-rbind(Envir20092010pt1, Envir20092010pt2)
DWAF20092010$year<-rep(c("20092010"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/4485")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20072008pt1 <-data.frame(party, office, rating)
Envir20072008pt1 <- Envir20072008pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/4485?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20072008pt2 <-data.frame(party, office, rating)
Envir20072008pt2 <- Envir20072008pt2[1:100,]

DWAF20072008<-rbind(Envir20072008pt1, Envir20072008pt2)
DWAF20072008$year<-rep(c("20072008"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/3574")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20052006pt1 <-data.frame(party, office, rating)
Envir20052006pt1 <- Envir20052006pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/3574?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir20052006pt2 <-data.frame(party, office, rating)
Envir20052006pt2 <- Envir20052006pt2[1:100,]

DWAF20052006<-rbind(Envir20052006pt1, Envir20052006pt2)
DWAF20052006$year<-rep(c("20052006"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/3080")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2004pt1 <-data.frame(party, office, rating)
Envir2004pt1 <- Envir2004pt1[1:100,]

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/3080?p=2&of=")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
Envir2004pt2 <-data.frame(party, office, rating)
Envir2004pt2 <- Envir2004pt2[1:100,]

DWAF2004<-rbind(Envir2004pt1, Envir2004pt2)
DWAF2004$year<-rep(c("2004"),times=200)

url <- read_html("https://justfacts.votesmart.org/interest-group/109/rating/3081")
office <- url%>% html_nodes(".col-md-2+ .text-left") %>% html_text()
party <- url%>% html_nodes(".rating-detail-party-table-data-element") %>% html_text()
party <- party[1:100]
office <- office[2:101]
rating <- url%>% html_nodes("td.text-right") %>% html_text()
DWAF2003 <-data.frame(party, office, rating)
DWAF2003 <- DWAF2003[1:100,]
DWAF2003$year<-rep(c("2003"),times=100)
```

```{r DWAF manipulation}
DWAF<-rbind(DWAF2015,  DWAF2013, DWAF20112012, DWAF2020, DWAF20092010, DWAF2019,  DWAF20072008, DWAF2018, DWAF20052006, DWAF2017, DWAF2004, DWAF2003, DWAF2016)
DWAF[c('x', 'office')] <- str_split_fixed(DWAF$office, ' ', 2)
DWAF[c('office', 'x1')] <- str_split_fixed(DWAF$office, ' ', 2)
DWAF[DWAF==""]<-NA
DWAF[DWAF==" "]<-NA
DWAF <-subset(DWAF, select = -c(x, x1))
DWAF <- DWAF[complete.cases(DWAF),]
senateDWAF <- DWAF %>% filter(DWAF$office=="Senate") #make senate dataset
houseDWAF <- DWAF %>% filter(DWAF$office=="House") 
view(senateDWAF)
view(houseDWAF)
```

```{r save files}
write.csv(senateDWAF, "senateDWAF.csv", row.names = FALSE)
write.csv(houseDWAF, "houseDWAF.csv", row.names = FALSE)
write.csv(senateNARAL, "senateNARAL.csv", row.names = FALSE)
write.csv(houseNARAL, "houseNARAL.csv", row.names = FALSE)
write.csv(senateDW, "senateDW.csv", row.names = FALSE)
write.csv(houseDW, "houseDW.csv", row.names = FALSE)
write.csv(finalANESdata, "ANES.csv", row.names = FALSE)
write.csv(finalANESdataenvironment, "ANESenvironment.csv", row.names = FALSE)
write.csv(senateCAGW, "senateCAGW.csv", row.names = FALSE)
write.csv(houseCAGW, "houseCAGW.csv", row.names = FALSE)
write.csv(senateHRC, "senateHRC.csv", row.names = FALSE)
write.csv(houseHRC, "houseHRC.csv", row.names = FALSE)
write.csv(senateACLU, "senateACLU.csv", row.names = FALSE)
write.csv(houseACLU, "houseACLU.csv", row.names = FALSE)
write.csv(senateRTL, "senateRTL.csv", row.names = FALSE)
write.csv(houseRTL, "houseRTL.csv", row.names = FALSE)
write.csv(senatePA, "senatePA.csv", row.names = FALSE)
write.csv(housePA, "housePA.csv", row.names = FALSE)
write.csv(senateCFLW, "senateCFLW.csv", row.names = FALSE)
write.csv(houseCFLW, "houseCFLW.csv", row.names = FALSE)
write.csv(senateAPHA, "senateAPHA.csv", row.names = FALSE)
write.csv(houseAPHA, "houseAPHA.csv", row.names = FALSE)
write.csv(senateNTU, "senateNTU.csv", row.names = FALSE)
write.csv(houseNTU, "houseNTU.csv", row.names = FALSE)
```


